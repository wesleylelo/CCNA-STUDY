CCNA 1

Network Components

Host Roles

All computers that are connected to a network and participate directly in network communication are classified as hosts;

Hosts can be called end devices. Some hosts are also called clientes;

However, the term hosts specifically refers to devices on the network that are assigned a number for communication purposes;

Peer-to-Peer

Client and server software usually run on separate computers, but it is also possible for one computer to be used for both roles at the same time.
In small businesses and homes, many computers function as the servers and clients on the network. This type of network is called a peer-to-peer network.

Intermediary Devices - 

Intermediary devices connect the individual end devices to the network. They can connect multiple individual networks to form an internetwork. These intermediary devices provide connectivity and ensure that data flows across the network.

Network Representations and Topologies - 

Network Representations - 

A diagram provides an easy way to understand how devices connect in a large network. This type of “picture” of a network is known as a topology diagram. The ability to recognize the logical representations of the physical networking components is critical to being able to visualize the organization and operation of a network.

In addition to these representations, specialized terminology is used to describe how each of these devices and media connect to each other:

Network Interface Card (NIC) - A NIC physically connects the end device to the network.
Physical Port - A connector or outlet on a networking device where the media connects to an end device or another networking device.
Interface - Specialized ports on a networking device that connect to individual networks. Because routers connect networks, the ports on a router are referred to as network interfaces.
Note: The terms port and interface are often used interchangeably.

Topology Diagrams

Physical Topology Diagrams

Physical topology diagrams illustrate the physical location of intermediary devices and cable installation.

Logical Topology Diagrams

Logical topology diagrams illustrate devices, ports, and the addressing scheme of the network.

LANs and WANs

Network infrastructures vary greatly in terms of:

	Size of the area covered
	Number of users connected
	Number and types of services available
	Area of responsibility

LANs

A LAN is a network infrastructure that spans a small geographical area. LANs have specific characteristics:

	LANs interconnect end devices in a limited area such as a home, school, office building, or campus.
	A LAN is usually administered by a single organization or individual. Administrative control is enforced at the network level and governs the 	security and access control policies.
	LANs provide high-speed bandwidth to internal end devices and intermediary devices, as shown in the figure.

WANs

The figure shows a WAN which interconnects two LANs. A WAN is a network infrastructure that spans a wide geographical area. WANs are typically managed by service providers (SPs) or Internet Service Providers (ISPs).

WANs have specific characteristics:

	WANs interconnect LANs over wide geographical areas such as between cities, states, provinces, countries, or continents.
	WANs are usually administered by multiple service providers.
	WANs typically provide slower speed links between LANs.

Intranets and Extranets

Intranet is a term often used to refer to a private connection of LANs and WANs that belongs to an organization. An intranet is designed to be accessible only by the organization's members, employees, or others with authorization.

An organization may use an extranet to provide secure and safe access to individuals who work for a different organization but require access to the organization’s data. Here are some examples of extranets:

	A company that is providing access to outside suppliers and contractors
	A hospital that is providing a booking system to doctors so they can make appointments for their patients
	A local office of education that is providing budget and personnel information to the schools in its district

Home and Small Office Internet Connections

Cable - Typically offered by cable television service providers, the internet data signal transmits on the same cable that delivers cable television. It provides a high bandwidth, high availability, and an always-on connection to the internet.

DSL - Digital Subscriber Lines also provide high bandwidth, high availability, and an always-on connection to the internet. DSL runs over a telephone line. In general, small office and home office users connect using Asymmetrical DSL (ADSL), which means that the download speed is faster than the upload speed.

Cellular - Cellular internet access uses a cell phone network to connect. Wherever you can get a cellular signal, you can get cellular internet access. Performance is limited by the capabilities of the phone and the cell tower to which it is connected.

Satellite - The availability of satellite internet access is a benefit in those areas that would otherwise have no internet connectivity at all. Satellite dishes require a clear line of sight to the satellite.

Dial-up Telephone - An inexpensive option that uses any phone line and a modem. The low bandwidth provided by a dial-up modem connection is not sufficient for large data transfer, although it is useful for mobile access while traveling.


Businesses Internet Connections

Dedicated Leased Line - Leased lines are reserved circuits within the service provider’s network that connect geographically separated offices for private voice and/or data networking. The circuits are rented at a monthly or yearly rate.

Metro Ethernet - This is sometimes known as Ethernet WAN. In this module, we will refer to it as Metro Ethernet. Metro ethernets extend LAN access technology into the WAN. Ethernet is a LAN technology you will learn about in a later module.

Business DSL - Business DSL is available in various formats. A popular choice is Symmetric Digital Subscriber Line (SDSL) which is similar to the consumer version of DSL but provides uploads and downloads at the same high speeds.

Satellite - Satellite service can provide a connection when a wired solution is not available.


The Converging Network


Traditional Separate Networks

Consider a school built thirty years ago. Back then, some classrooms were cabled for the data network, telephone network, and video network for televisions. These separate networks could not communicate with each other. Each network used different technologies to carry the communication signal. Each network had its own set of rules and standards to ensure successful communication. Multiple services ran on multiple networks.

Converged Networks

Today, the separate data, telephone, and video networks converge. Unlike dedicated networks, converged networks are capable of delivering data, voice, and video between many different types of devices over the same network infrastructure. This network infrastructure uses the same set of rules, agreements, and implementation standards. Converged data networks carry multiple services on one network.


Network Architecture
Have you ever been busy working online, only to have “the internet go down”? As you know by now, the internet did not go down, you just lost your connection to it. It is very frustrating. With so many people in the world relying on network access to work and learn, it is imperative that networks are reliable. In this context, reliability means more than your connection to the internet. This topic focuses on the four aspects of network reliability.

The role of the network has changed from a data-only network to a system that enables the connections of people, devices, and information in a media-rich, converged network environment. For networks to function efficiently and grow in this type of environment, the network must be built upon a standard network architecture.

Networks also support a wide range of applications and services. They must operate over many different types of cables and devices, which make up the physical infrastructure. The term network architecture, in this context, refers to the technologies that support the infrastructure and the programmed services and rules, or protocols, that move data across the network.

As networks evolve, we have learned that there are four basic characteristics that network architects must address to meet user expectations:

Fault Tolerance
Scalability
Quality of Service (QoS)
Security

Fault Tolerance

A fault tolerant network is one that limits the number of affected devices during a failure. It is built to allow quick recovery when such a failure occurs. These networks depend on multiple paths between the source and destination of a message. If one path fails, the messages are instantly sent over a different link. Having multiple paths to a destination is known as redundancy.

Implementing a packet-switched network is one way that reliable networks provide redundancy. Packet switching splits traffic into packets that are routed over a shared network. A single message, such as an email or a video stream, is broken into multiple message blocks, called packets. Each packet has the necessary addressing information of the source and destination of the message. The routers within the network switch the packets based on the condition of the network at that moment. This means that all the packets in a single message could take very different paths to the same destination. In the figure, the user is unaware and unaffected by the router that is dynamically changing the route when a link fails.

Scalability
A scalable network expands quickly to support new users and applications. It does this without degrading the performance of services that are being accessed by existing users. The figure shows how a new network is easily added to an existing network. These networks are scalable because the designers follow accepted standards and protocols. This lets software and hardware vendors focus on improving products and services without having to design a new set of rules for operating within the network.

Quality of Service

Quality of Service (QoS) is an increasing requirement of networks today. New applications available to users over networks, such as voice and live video transmissions, create higher expectations for the quality of the delivered services. Have you ever tried to watch a video with constant breaks and pauses? As data, voice, and video content continue to converge onto the same network, QoS becomes a primary mechanism for managing congestion and ensuring reliable delivery of content to all users.

Congestion occurs when the demand for bandwidth exceeds the amount available. Network bandwidth is measured in the number of bits that can be transmitted in a single second, or bits per second (bps). When simultaneous communications are attempted across the network, the demand for network bandwidth can exceed its availability, creating network congestion.

When the volume of traffic is greater than what can be transported across the network, devices will hold the packets in memory until resources become available to transmit them. In the figure, one user is requesting a web page, and another is on a phone call. With a QoS policy in place, the router can manage the flow of data and voice traffic, giving priority to voice communications if the network experiences congestion.The focus of QoS is to prioritize time-sensitive traffic. The type of traffic, not the content of the traffic, is what is important.

Network Security

The network infrastructure, services, and the data contained on network-attached devices are crucial personal and business assets. Network administrators must address two types of network security concerns: network infrastructure security and information security.

Securing the network infrastructure includes physically securing devices that provide network connectivity and preventing unauthorized access to the management software that resides on them.

Network administrators must also protect the information contained within the packets being transmitted over the network, and the information stored on network attached devices. In order to achieve the goals of network security, there are three primary requirements.

Confidentiality - Data confidentiality means that only the intended and authorized recipients can access and read data.
Integrity - Data integrity assures users that the information has not been altered in transmission, from origin to destination.
Availability - Data availability assures users of timely and reliable access to data services for authorized users.


Powerline Networking

Powerline networking for home networks uses existing electrical wiring to connect devices.

Using a standard powerline adapter, devices can connect to the LAN wherever there is an electrical outlet. No data cables need to be installed, and there is little to no additional electricity used. Using the same wiring that delivers electricity, powerline networking sends information by sending data on certain frequencies.

Powerline networking is especially useful when wireless access points cannot reach all the devices in the home. Powerline networking is not a substitute for dedicated cabling in data networks. However, it is an alternative when data network cables or wireless communications are not possible or effective.

Basic Switch and End Device Configuration

To move from any subconfiguration mode to the privileged EXEC mode, enter the end command or enter the key combination Ctrl+Z.

Switch[Prompts] > show[command] (ip protocols)[Key or Arguments]

Keyword - This is a specific parameter defined in the operating system (in the figure, ip protocols).
Argument - This is not predefined; it is a value or variable defined by the user (in the figure, 192.168.10.5).

Keystroke	Description

Tab		Completes a partial command name entry.
Backspace	Erases the character to the left of the cursor.
Ctrl+D		Erases the character at the cursor.
Ctrl+K		Erases all characters from the cursor to the end of the command line.
Esc D		Erases all characters from the cursor to the end of the word.
Ctrl+U or
Ctrl+X		Erases all characters from the cursor back to the beginning of the command line.

Ctrl+W		Erases the word to the left of the cursor.
Ctrl+A		Moves the cursor to the beginning of the line.

"Left Arrowor 
Ctrl+B"		Moves the cursor one character to the left.

Esc B		Moves the cursor back one word to the left.
Esc F		Moves the cursor forward one word to the right.

"Right Arrowor
Ctrl+F"		Moves the cursor one character to the right.

Ctrl+E		Moves the cursor to the end of command line.

"Up Arrowor 
Ctrl+P"		Recalls the previous command in the history buffer, beginning with the most recent command.

"Down Arrowor
Ctrl+N"		Goes to the next line in the the history buffer.

Ctrl+R or 
Ctrl+I or 
Ctrl+L		Redisplays the system prompt and command line after a console message is received.


This table lists commands used to exit out of an operation.

Table caption

Keystroke	Description
Ctrl-C		When in any configuration mode, ends the configuration mode and returns to privileged EXEC mode. When in setup mode, aborts back to the 		command prompt.
Ctrl-Z		When in any configuration mode, ends the configuration mode and returns to privileged EXEC mode.
Ctrl-Shift-6	All-purpose break sequence used to abort DNS lookups, traceroutes, pings, etc.

Protocols and Models

Network Protocol Requirements
The protocols that are used in network communications share many of these fundamental traits. In addition to identifying the source and destination, computer and network protocols define the details of how a message is transmitted across a network. Common computer protocols include the following requirements:

Message encoding
Message formatting and encapsulation
Message size
Message timing
Message delivery options

Message Encoding
One of the first steps to sending a message is encoding. Encoding is the process of converting information into another acceptable form, for transmission. Decoding reverses this process to interpret the information.

Encoding between hosts must be in an appropriate format for the medium. Messages sent across the network are first converted into bits by the sending host. Each bit is encoded into a pattern of voltages on copper wires, infrared light in optical fibers, or microwaves for wireless systems. The destination host receives and decodes the signals to interpret the message.

Message Size
Another rule of communication is message size.

The rules that govern the size of the pieces, or frames, communicated across the network are very strict. They can also be different, depending on the channel used. Frames that are too long or too short are not delivered.

The size restrictions of frames require the source host to break a long message into individual pieces that meet both the minimum and maximum size requirements. The long message will be sent in separate frames, with each frame containing a piece of the original message. Each frame will also have its own addressing information. At the receiving host, the individual pieces of the message are reconstructed into the original message.

Message Timing
Message timing is also very important in network communications. Message timing includes the following:

Flow Control - This is the process of managing the rate of data transmission. Flow control defines how much information can be sent and the speed at which it can be delivered.

Response Timeout -  Hosts on the network use network protocols that specify how long to wait for responses and what action to take if a response timeout occurs.

Access method - This determines when someone can send a message.

Message Delivery Options
A message can be delivered in different ways.

Network

Network communications has similar delivery options to communicate.

Unicast - Information is being transmitted to a single end device.
Multicast - Information is being transmitted to a one or more end devices.
Broadcast - Information is being transmitted to all end devices.

Network Protocol Functions
Network communication protocols are responsible for a variety of functions necessary for network communications between end devices.

Function	Description

Addressing	This identifies the sender and the intended receiver of the message using a defined addressing scheme. Examples of protocols that provide 		addressing include Ethernet, IPv4, and IPv6.
Reliability	This function provides guaranteed delivery mechanisms in case messages are lost or corrupted in transit. TCP provides guaranteed delivery.

Flow control	This function ensures that data flows at an efficient rate between two communicating devices. TCP provides flow control services.

Sequencing	This function uniquely labels each transmitted segment of data. The receiving device uses the sequencing information to reassemble the 			information correctly. This is useful if the data segments are lost, delayed or received out-of-order. TCP provides sequencing services.
Error Detection	This function is used to determine if data became corrupted during transmission. Various protocols that provide error detection include 
		Ethernet, IPv4, IPv6, and TCP.
Application Interface	This function contains information used for process-to-process communications between network applications. For example, when 				accessing a web page, HTTP or HTTPS protocols are used to communicate between the client and server web processes.

TCP/IP Protocol Suite
Today, the TCP/IP protocol suite includes many protocols and continues to evolve to support new services.

Open standard protocol suite - This means it is freely available to the public and can be used by any vendor on their hardware or in their software.
Standards-based protocol suite - This means it has been endorsed by the networking industry and approved by a standards organization. This ensures that products from different manufacturers can interoperate successfully.

Application Layer

Name System

DNS - Domain Name System. Translates domain names such as cisco.com, into IP addresses.
Host Config

DHCPv4 - Dynamic Host Configuration Protocol for IPv4. A DHCPv4 server dynamically assigns IPv4 addressing information to DHCPv4 clients at start-up and allows the addresses to be re-used when no longer needed.
DHCPv6 - Dynamic Host Configuration Protocol for IPv6. DHCPv6 is similar to DHCPv4. A DHCPv6 server dynamically assigns IPv6 addressing information to DHCPv6 clients at start-up.
SLAAC - Stateless Address Autoconfiguration. A method that allows a device to obtain its IPv6 addressing information without using a DHCPv6 server.
Email

SMTP - Simple Mail Transfer Protocol. Enables clients to send email to a mail server and enables servers to send email to other servers.
POP3 - Post Office Protocol version 3. Enables clients to retrieve email from a mail server and download the email to the client's local mail application.
IMAP - Internet Message Access Protocol. Enables clients to access email stored on a mail server as well as maintaining email on the server.
File Transfer

FTP - File Transfer Protocol. Sets the rules that enable a user on one host to access and transfer files to and from another host over a network. FTP is a reliable, connection-oriented, and acknowledged file delivery protocol.
SFTP - SSH File Transfer Protocol. As an extension to Secure Shell (SSH) protocol, SFTP can be used to establish a secure file transfer session in which the file transfer is encrypted. SSH is a method for secure remote login that is typically used for accessing the command line of a device.
TFTP - Trivial File Transfer Protocol. A simple, connectionless file transfer protocol with best-effort, unacknowledged file delivery. It uses less overhead than FTP.
Web and Web Service

HTTP - Hypertext Transfer Protocol. A set of rules for exchanging text, graphic images, sound, video, and other multimedia files on the World Wide Web.
HTTPS - HTTP Secure. A secure form of HTTP that encrypts the data that is exchanged over the World Wide Web.
REST - Representational State Transfer. A web service that uses application programming interfaces (APIs) and HTTP requests to create web applications.

Transport layer

Connection-Oriented

TCP - Transmission Control Protocol. Enables reliable communication between processes running on separate hosts and provides reliable, acknowledged transmissions that confirm successful delivery.
Connectionless

UDP - User Datagram Protocol. Enables a process running on one host to send packets to a process running on another host. However, UDP does not confirm successful datagram transmission.


Internet Layer

Internet Protocol

IPv4 - Internet Protocol version 4. Receives message segments from the transport layer, packages messages into packets, and addresses packets for end-to-end delivery over a network. IPv4 uses a 32-bit address.
IPv6 - IP version 6. Similar to IPv4 but uses a 128-bit address.
NAT - Network Address Translation. Translates IPv4 addresses from a private network into globally unique public IPv4 addresses.
Messaging

ICMPv4 - Internet Control Message Protocol for IPv4. Provides feedback from a destination host to a source host about errors in packet delivery.
ICMPv6 - ICMP for IPv6. Similar functionality to ICMPv4 but is used for IPv6 packets.
ICMPv6 ND - ICMPv6 Neighbor Discovery. Includes four protocol messages that are used for address resolution and duplicate address detection.
Routing Protocols

OSPF - Open Shortest Path First. Link-state routing protocol that uses a hierarchical design based on areas. OSPF is an open standard interior routing protocol.
EIGRP - EIGRP - Enhanced Interior Gateway Routing Protocol. An open standard routing protocol developed by Cisco that uses a composite metric based on bandwidth, delay, load and reliability.
BGP - Border Gateway Protocol. An open standard exterior gateway routing protocol used between Internet Service Providers (ISPs). BGP is also commonly used between ISPs and their large private clients to exchange routing information.


Network Access Layer

Address Resolution

ARP - Address Resolution Protocol. Provides dynamic address mapping between an IPv4 address and a hardware address.

Note: You may see other documentation state that ARP operates at the Internet Layer (OSI Layer 3). However, in this course we state that ARP operates at the Network Access layer (OSI Layer 2) because it's primary purpose is the discover the MAC address of the destination. A MAC address is a Layer 2 address.

Data Link Protocols

Ethernet - Defines the rules for wiring and signaling standards of the network access layer.
WLAN - Wireless Local Area Network. Defines the rules for wireless signaling across the 2.4 GHz and 5 GHz radio frequencies.


Internet Society (ISOC) - Responsible for promoting the open development and evolution of internet use throughout the world.
Internet Architecture Board (IAB) - Responsible for the overall management and development of internet standards.
Internet Engineering Task Force (IETF) - Develops, updates, and maintains internet and TCP/IP technologies. This includes the process and documents for developing new protocols and updating existing protocols, which are known as Request for Comments (RFC) documents.
Internet Research Task Force (IRTF) - Focused on long-term research related to internet and TCP/IP protocols such as Anti-Spam Research Group (ASRG), Crypto Forum Research Group (CFRG), and Peer-to-Peer Research Group (P2PRG).


Internet Corporation for Assigned Names and Numbers (ICANN) - Based in the United States, ICANN coordinates IP address allocation, the management of domain names, and assignment of other information used in TCP/IP protocols.
Internet Assigned Numbers Authority (IANA) - Responsible for overseeing and managing IP address allocation, domain name management, and protocol identifiers for ICANN.

Electronic and Communications Standards


Other standards organizations have responsibilities for promoting and creating the electronic and communication standards used to deliver the IP packets as electronic signals over a wired or wireless medium.

These standard organizations include the following:

Institute of Electrical and Electronics Engineers (IEEE, pronounced “I-triple-E”) - Organization of electrical engineering and electronics dedicated to advancing technological innovation and creating standards in a wide area of industries including power and energy, healthcare, telecommunications, and networking. Important IEEE networking standards include 802.3 Ethernet and 802.11 WLAN standard. Search the internet for other IEEE network standards.

Electronic Industries Alliance (EIA) - Organization is best known for its standards relating to electrical wiring, connectors, and the 19-inch racks used to mount networking equipment.

Telecommunications Industry Association (TIA) - Organization responsible for developing communication standards in a variety of areas including radio equipment, cellular towers, Voice over IP (VoIP) devices, satellite communications, and more.

International Telecommunications Union-Telecommunication Standardization Sector (ITU-T) - One of the largest and oldest communication standards organizations. The ITU-T defines standards for video compression, Internet Protocol Television (IPTV), and broadband communications, such as a digital subscriber line (DSL).


OSI		TCP/IP

Application	Application

Presetation	Application

Session		Application

Transport	Transport

Network		Internet

Data Link	Network Access

Physical	Network Access

OSI Model Layer	Description
7 - Application		The application layer contains protocols used for process-to-process communications.
6 - Presentation	The presentation layer provides for common representation of the data transferred between application layer services.
5 - Session		The session layer provides services to the presentation layer to organize its dialogue and to manage data exchange.
4 - Transport		The transport layer defines services to segment, transfer, and reassemble the data for individual communications between the end 			devices.
3 - Network		The network layer provides services to exchange the individual pieces of data over the network between identified end devices.
2 - Data Link		The data link layer protocols describe methods for exchanging data frames between devices over a common media
1 - Physical		The physical layer protocols describe the mechanical, electrical, functional, and procedural means to activate, maintain, and de-			activate physical connections for a bit transmission to and from a network device.


The Physical Connection

A physical connection can be a wired connection using a cable or a wireless connection using radio waves.

Network Interface Cards

Network interface cards (NICs) connect a device to the network. Ethernet NICs are used for a wired connection, whereas wireless local area network (WLAN) NICs are used for wireless. An end-user device may include one or both types of NICs.

The Physical Layer

The OSI physical layer provides the means to transport the bits that make up a data link layer frame across the network media. This layer accepts a complete frame from the data link layer and encodes it as a series of signals that are transmitted to the local media. The encoded bits that comprise a frame are received by either an end device or an intermediate device.

The physical layer encodes the frames and creates the electrical, optical, or radio wave signals that represent the bits in each frame. These signals are then sent over the media, one at a time.

The destination node physical layer retrieves these individual signals from the media, restores them to their bit representations, and passes the bits up to the data link layer as a complete frame.

Physical Layer Standards


The protocols and operations of the upper OSI layers are performed using software designed by software engineers and computer scientists. The services and protocols in the TCP/IP suite are defined by the Internet Engineering Task Force (IETF).

The physical layer consists of electronic circuitry, media, and connectors developed by engineers. Therefore, it is appropriate that the standards governing this hardware are defined by the relevant electrical and communications engineering organizations.

The physical layer hardware, media, encoding, and signaling standards are defined and governed by these standards organizations =>

International Organization for Standardization (ISO)
Telecommunications Industry Association/Electronic Industries Association (TIA/EIA)
International Telecommunication Union (ITU)
American National Standards Institute (ANSI)
Institute of Electrical and Electronics Engineers (IEEE)
National telecommunications regulatory authorities including the Federal Communication Commission (FCC) in the USA and the European Telecommunications Standards Institute (ETSI)
In addition to these, there are often regional cabling standards groups such as CSA (Canadian Standards Association), CENELEC (European Committee for Electrotechnical Standardization), and JSA/JIS (Japanese Standards Association), which develop local specifications.

Physical Components
The physical layer standards address three functional areas:

Physical Components
Encoding
Signaling
Physical Components

The physical components are the electronic hardware devices, media, and other connectors that transmit the signals that represent the bits. Hardware components such as NICs, interfaces and connectors, cable materials, and cable designs are all specified in standards associated with the physical layer. The various ports and interfaces on a Cisco 1941 router are also examples of physical components with specific connectors and pinouts resulting from standards.

Encoding
Encoding or line encoding is a method of converting a stream of data bits into a predefined "code”. Codes are groupings of bits used to provide a predictable pattern that can be recognized by both the sender and the receiver. In other words, encoding is the method or pattern used to represent digital information. This is similar to how Morse code encodes a message using a series of dots and dashes.

Signaling
The physical layer must generate the electrical, optical, or wireless signals that represent the "1" and "0" on the media. The way that bits are represented is called the signaling method. The physical layer standards must define what type of signal represents a "1" and what type of signal represents a "0". This can be as simple as a change in the level of an electrical signal or optical pulse. For example, a long pulse might represent a 1 whereas a short pulse might represent a 0.

Bandwidth
Different physical media support the transfer of bits at different rates. Data transfer is usually discussed in terms of bandwidth. Bandwidth is the capacity at which a medium can carry data. Digital bandwidth measures the amount of data that can flow from one place to another in a given amount of time. Bandwidth is typically measured in kilobits per second (kbps), megabits per second (Mbps), or gigabits per second (Gbps). Bandwidth is sometimes thought of as the speed that bits travel, however this is not accurate. For example, in both 10Mbps and 100Mbps Ethernet, the bits are sent at the speed of electricity. The difference is the number of bits that are transmitted per second.

A combination of factors determines the practical bandwidth of a network:

The properties of the physical media
The technologies chosen for signaling and detecting network signals

Physical media properties, current technologies, and the laws of physics all play a role in determining the available bandwidth.

Bandwidth Terminology
Terms used to measure the quality of bandwidth include:

Latency
Throughput
Goodput

Latency

Latency refers to the amount of time, including delays, for data to travel from one given point to another.

In an internetwork, or a network with multiple segments, throughput cannot be faster than the slowest link in the path from source to destination. Even if all, or most, of the segments have high bandwidth, it will only take one segment in the path with low throughput to create a bottleneck in the throughput of the entire network.

Throughput

Throughput is the measure of the transfer of bits across the media over a given period of time.

Due to a number of factors, throughput usually does not match the specified bandwidth in physical layer implementations. Throughput is usually lower than the bandwidth. There are many factors that influence throughput:

The amount of traffic
The type of traffic
The latency created by the number of network devices encountered between source and destination
There are many online speed tests that can reveal the throughput of an internet connection.

Throughput

Throughput is the measure of the transfer of bits across the media over a given period of time.

Due to a number of factors, throughput usually does not match the specified bandwidth in physical layer implementations. Throughput is usually lower than the bandwidth. There are many factors that influence throughput:

The amount of traffic
The type of traffic
The latency created by the number of network devices encountered between source and destination
There are many online speed tests that can reveal the throughput of an internet connection. The figure provides sample results from a speed test.

Goodput

There is a third measurement to assess the transfer of usable data; it is known as goodput. Goodput is the measure of usable data transferred over a given period of time. Goodput is throughput minus traffic overhead for establishing sessions, acknowledgments, encapsulation, and retransmitted bits. Goodput is always lower than throughput, which is generally lower than the bandwidth.

Characteristics of Copper Cabling

Networks use copper media because it is inexpensive, easy to install, and has low resistance to electrical current. However, copper media is limited by distance and signal interference.

A detector in the network interface of a destination device must receive a signal that can be successfully decoded to match the signal sent. However, the farther the signal travels, the more it deteriorates. This is referred to as signal attenuation. For this reason, all copper media must follow strict distance limitations as specified by the guiding standards.

The timing and voltage values of the electrical pulses are also susceptible to interference from two sources:

Electromagnetic interference (EMI) or radio frequency interference (RFI) - EMI and RFI signals can distort and corrupt the data signals being carried by copper media. Potential sources of EMI and RFI include radio waves and electromagnetic devices, such as fluorescent lights or electric motors.

Crosstalk - Crosstalk is a disturbance caused by the electric or magnetic fields of a signal on one wire to the signal in an adjacent wire. In telephone circuits, crosstalk can result in hearing part of another voice conversation from an adjacent circuit. Specifically, when an electrical current flows through a wire, it creates a small, circular magnetic field around the wire, which can be picked up by an adjacent wire.

Unshielded twisted-pair (UTP) - 

Unshielded twisted-pair (UTP) cabling is the most common networking media. UTP cabling, terminated with RJ-45 connectors, is used for interconnecting network hosts with intermediary networking devices, such as switches and routers.

Shielded twisted-pair (STP)
Shielded twisted-pair (STP) provides better noise protection than UTP cabling. However, compared to UTP cable, STP cable is significantly more expensive and difficult to install. Like UTP cable, STP uses an RJ-45 connector.

STP cables combine the techniques of shielding to counter EMI and RFI, and wire twisting to counter crosstalk. To gain the full benefit of the shielding, STP cables are terminated with special shielded STP data connectors. If the cable is improperly grounded, the shield may act as an antenna and pick up unwanted signals.

Coaxial cable, or coax for short, gets its name from the fact that there are two conductors that share the same axis. As shown in the figure, coaxial cable consists of the following:

A copper conductor is used to transmit the electronic signals.
A layer of flexible plastic insulation surrounds a copper conductor.
The insulating material is surrounded in a woven copper braid, or metallic foil, that acts as the second wire in the circuit and as a shield for the inner conductor. This second layer, or shield, also reduces the amount of outside electromagnetic interference.
The entire cable is covered with a cable jacket to prevent minor physical damage.

Although UTP cable has essentially replaced coaxial cable in modern Ethernet installations, the coaxial cable design is used in the following situations:

Wireless installations - Coaxial cables attach antennas to wireless devices. The coaxial cable carries radio frequency (RF) energy between the antennas and the radio equipment.
Cable internet installations - Cable service providers provide internet connectivity to their customers by replacing portions of the coaxial cable and supporting amplification elements with fiber-optic cable. However, the wiring inside the customer's premises is still coax cable.

Properties of UTP Cabling - 

UTP cable does not use shielding to counter the effects of EMI and RFI. Instead, cable designers have discovered other ways that they can limit the negative effect of crosstalk:

Cancellation - Designers now pair wires in a circuit. When two wires in an electrical circuit are placed close together, their magnetic fields are the exact opposite of each other. Therefore, the two magnetic fields cancel each other and also cancel out any outside EMI and RFI signals.

Varying the number of twists per wire pair - To further enhance the cancellation effect of paired circuit wires, designers vary the number of twists of each wire pair in a cable. UTP cable must follow precise specifications governing how many twists or braids are permitted per meter (3.28 feet) of cable.

UTP cable relies solely on the cancellation effect produced by the twisted wire pairs to limit signal degradation and effectively provide self-shielding for wire pairs within the network media.

UTP cabling conforms to the standards established jointly by the TIA/EIA. Specifically, TIA/EIA-568 stipulates the commercial cabling standards for LAN installations and is the standard most commonly used in LAN cabling environments. Some of the elements defined are as follows:

Cable types
Cable lengths
Connectors
Cable termination
Methods of testing cable
The electrical characteristics of copper cabling are defined by the Institute of Electrical and Electronics Engineers (IEEE). IEEE rates UTP cabling according to its performance. Cables are placed into categories based on their ability to carry higher bandwidth rates. For example, Category 5 cable is used commonly in 100BASE-TX Fast Ethernet installations. Other categories include Enhanced Category 5 cable, Category 6, and Category 6a.

Cables in higher categories are designed and constructed to support higher data rates. As new gigabit speed Ethernet technologies are being developed and adopted, Category 5e is now the minimally acceptable cable type, with Category 6 being the recommended type for new building installations.

The figure shows three categories of UTP cable:

Category 3 was originally used for voice communication over voice lines, but later used for data transmission.
Category 5 and 5e is used for data transmission. Category 5 supports 100Mbps and Category 5e supports 1000 Mbps
Category 6 has an added separator between each wire pair to support higher speeds. Category 6 supports up to 10 Gbps.
Category 7 also supports 10 Gbps.
Category 8 supports 40 Gbps.
Some manufacturers are making cables exceeding the TIA/EIA Category 6a specifications and refer to these as Category 7.

The figure shows the difference in construction between categories of UTP cable. At the top is category 3 with four wires. In the middle is category 5 and 5e with four twisted wire pairs. At the bottom is category 6 with four twisted wire pairs, each with a plastic separator.

Straight-through and Crossover UTP Cables - 

Different situations may require UTP cables to be wired according to different wiring conventions. This means that the individual wires in the cable have to be connected in different orders to different sets of pins in the RJ-45 connectors.

The following are the main cable types that are obtained by using specific wiring conventions:

Ethernet Straight-through - The most common type of networking cable. It is commonly used to interconnect a host to a switch and a switch to a router.
Ethernet Crossover - A cable used to interconnect similar devices. For example, to connect a switch to a switch, a host to a host, or a router to a router. However, crossover cables are now considered legacy as NICs use medium-dependent interface crossover (auto-MDIX) to automatically detect the cable type and make the internal connection.
Note: Another type of cable is a rollover cable, which is Cisco proprietary. It is used to connect a workstation to a router or switch console port.

Using a crossover or straight-through cable incorrectly between devices may not damage the devices, but connectivity and communication between the devices will not take place. This is a common error and checking that the device connections are correct should be the first troubleshooting action if connectivity is not achieved.


Properties of Fiber-Optic Cabling - 

Types of Fiber Media
Fiber-optic cables are broadly classified into two types:

Single-mode fiber (SMF)
Multimode fiber (MMF)

Single-Mode Fiber

SMF consists of a very small core and uses expensive laser technology to send a single ray of light, as shown in the figure. SMF is popular in long-distance situations spanning hundreds of kilometers, such as those required in long haul telephony and cable TV applications.

Multimode Fiber

MMF consists of a larger core and uses LED emitters to send light pulses. Specifically, light from an LED enters the multimode fiber at different angles, as shown in the figure. MMFs are popular in LANs because they can be powered by low-cost LEDs. It provides bandwidth up to 10 Gbps over link lengths of up to 550 meters.

One of the highlighted differences between MMF and SMF is the amount of dispersion. Dispersion refers to the spreading out of a light pulse over time. Increased dispersion means increased loss of signal strength. MMF has a greater dispersion than SMF. That is why MMF can only travel up to 500 meters before signal loss.

Fiber-Optic Cabling Usage
Fiber-optic cabling is now being used in four types of industry:

Enterprise Networks - Used for backbone cabling applications and interconnecting infrastructure devices
Fiber-to-the-Home (FTTH) - Used to provide always-on broadband services to homes and small businesses
Long-Haul Networks - Used by service providers to connect countries and cities
Submarine Cable Networks - Used to provide reliable high-speed, high-capacity solutions capable of surviving in harsh undersea environments at up to transoceanic distances. Search the internet for “submarine cables telegeography map” to view various maps online.

Fiber-Optic Connectors
An optical-fiber connector terminates the end of an optical fiber. A variety of optical-fiber connectors are available. The main differences among the types of connectors are dimensions and methods of coupling. Businesses decide on the types of connectors that will be used, based on their equipment.

Note: Some switches and routers have ports that support fiber-optic connectors through a small form-factor pluggable (SFP) transceiver. Search the internet for various types of SFPs.

Straight-Tip Connectors:

ST connectors were one of the first connector types used. The connector locks securely with a 'twist-on/twist-off' bayonet-style mechanism.

Subscriber Connector (SC):

SC connectors are sometimes referred to as 'square connectors' or 'standard connectors'. They are a widely-adopted LAN and WAN connector that uses a push-pull mechanism to ensure positive insertion. This connector type is used with multimode and single-mode fiber.

Lucent Connector|Simplex Connectors:

LC simplex connectors are a smaller version of the SC connector. These are sometimes called little or local connectors and are quickly growing in popularity due to their smaller size.

Duplex Multimode LC Connectors:

A duplex multimode LC connector is similar to an LC simplex connector, but uses a duplex connector.

Until recently, light could only travel in one direction over optical fiber. Two fibers were required to support the full duplex operation. Therefore, fiber-optic patch cables bundle together two optical fiber cables and terminate them with a pair of standard, single-fiber connectors. Some fiber connectors accept both the transmitting and receiving fibers in a single connector known as a duplex connector, as shown in the Duplex Multimode LC Connector in the figure. BX standards such as 100BASE-BX use different wavelengths for sending and receiving over a single fiber.

UTP and Fiber-Optic Cabling Comparison

Table caption

Implementation Issues		UTP Cabling				Fiber-Optic Cabling
Bandwidth supported		10 Mb/s - 10 Gb/s			10 Mb/s - 100 Gb/s
Distance			Relatively short (1 - 100 meters)	Relatively long ( 1 - 100,000 meters)
Immunity to EMI and RFI		Low					High (Completely immune)
Immunity to electrical hazards	Low					High (Completely immune)
Media and connector costs	Lowest					Highest
Installation skills required	Lowest					Highest
Safety precautions		Lowest					Highest

Types of Wireless Media

These are the wireless standards:

Wi-Fi (IEEE 802.11) - Wireless LAN (WLAN) technology, commonly referred to as Wi-Fi. WLAN uses a contention-based protocol known as carrier sense multiple access/collision avoidance (CSMA/CA). The wireless NIC must first listen before transmitting to determine if the radio channel is clear. If another wireless device is transmitting, then the NIC must wait until the channel is clear. Wi-Fi is a trademark of the Wi-Fi Alliance. Wi-Fi is used with certified WLAN devices based on the IEEE 802.11 standards.


Bluetooth (IEEE 802.15) - This is a wireless personal area network (WPAN) standard, commonly known as “Bluetooth.” It uses a device pairing process to communicate over distances from 1 to 100 meters.


WiMAX (IEEE 802:16) - Commonly known as Worldwide Interoperability for Microware Access (WiMAX), this wireless standard uses a point-to-multipoint topology to provide wireless broadband access.


Zigbee (IEEE 802.15.4) - Zigbee is a specification used for low-data rate, low-power communications. It is intended for applications that require short-range, low data-rates and long battery life. Zigbee is typically used for industrial and Internet of Things (IoT) environments such as wireless light switches and medical device data collection.


The Data Link Layer - 

The data link layer of the OSI model (Layer 2) prepares network data for the physical network.
The data link layer is responsible for network interface card (NIC) to network interface card communications.

The data link layer does the following:

Enables upper layers to access the media. The upper layer protocol is completely unaware of the type of media that is used to forward the data.

Accepts data, usually Layer 3 packets (i.e., IPv4 or IPv6), and encapsulates them into Layer 2 frames.

Controls how data is placed and received on the media.

Exchanges frames between endpoints over the network media.

Receives encapsulated data, usually Layer 3 packets, and directs them to the proper upper-layer protocol.

Performs error detection and rejects any corrupt frame.

In computer networks, a node is a device that can receive, create, store, or forward data along a communications path. A node can be either an end device such as a laptop or mobile phone, or an intermediary device such as an Ethernet switch.

IEEE 802 LAN/MAN Data Link Sublayers

The IEEE 802 LAN/MAN data link layer consists of the following two sublayers:

Logical Link Control (LLC) - This IEEE 802.2 sublayer communicates between the networking software at the upper layers and the device hardware at the lower layers. It places information in the frame that identifies which network layer protocol is being used for the frame. This information allows multiple Layer 3 protocols, such as IPv4 and IPv6, to use the same network interface and media.

Media Access Control (MAC) – Implements this sublayer (IEEE 802.3, 802.11, or 802.15) in hardware. It is responsible for data encapsulation and media access control. It provides data link layer addressing and it is integrated with various physical layer technologies.

The LLC sublayer takes the network protocol data, which is typically an IPv4 or IPv6 packet, and adds Layer 2 control information to help deliver the packet to the destination node. 

The MAC sublayer controls the NIC and other hardware that is responsible for sending and receiving data on the wired or wireless LAN/MAN medium.

The MAC sublayer provides data encapsulation:

Frame delimiting - The framing process provides important delimiters to identify fields within a frame. These delimiting bits provide synchronization between the transmitting and receiving nodes.

Addressing - Provides source and destination addressing for transporting the Layer 2 frame between devices on the same shared medium.

Error detection - Includes a trailer used to detect transmission errors.

The MAC sublayer also provides media access control, allowing multiple devices to communicate over a shared (half-duplex) medium. Full-duplex communications do not require access control.

Providing Access to Media - 

At each hop along the path, a router performs the following Layer 2 functions:

Accepts a frame from a medium;
De-encapsulates the frame;
Re-encapsulates the packet into a new frame;
Forwards the new frame appropriate to the medium of that segment of the physical network;

Data Link Layer Standards - 

Data link layer protocols are generally not defined by Request for Comments (RFCs), unlike the protocols of the upper layers of the TCP/IP suite. 

The Internet Engineering Task Force (IETF) maintains the functional protocols and services for the TCP/IP protocol suite in the upper layers, but they do not define the functions and operation of the TCP/IP network access layer.

Engineering organizations that define open standards and protocols that apply to the network access layer (i.e., the OSI physical and data link layers) include the following:

Institute of Electrical and Electronics Engineers (IEEE);
International Telecommunication Union (ITU);
International Organization for Standardization (ISO);
American National Standards Institute (ANSI);


Topologies - 

Physical and Logical Topologies - 

As you learned in the previous topic, the data link layer prepares network data for the physical network. It must know the logical topology of a network in order to be able to determine what is needed to transfer frames from one device to another.

Physical topology – Identifies the physical connections and how end devices and intermediary devices (i.e, routers, switches, and wireless access points) are interconnected. The topology may also include specific device location such as room number and location on the equipment rack. Physical topologies are usually point-to-point or star;

Logical topology - Refers to the way a network transfers frames from one node to the next. This topology identifies virtual connections using device interfaces and Layer 3 IP addressing schemes;

The data link layer "sees" the logical topology of a network when controlling data access to the media. It is the logical topology that influences the type of network framing and media access control used.

WAN Topologies - 

Point - to - Point : This is the simplest and most common WAN topology. It consists of a permanent link between two endpoints.

Hub and Spoke: This is a WAN version of the star topology in which a central site interconnects branch sites through the use of point-to-point links. Branch sites cannot exchange data with other branch sites without going through the central site.

Mesh: This topology provides high availability but requires that every end system is interconnected to every other system. Therefore, the administrative and physical costs can be significant. Each link is essentially a point-to-point link to the other node.

A hybrid is a variation or combination of any topologies. For example, a partial mesh is a hybrid topology in which some, but not all, end devices are interconnected.

Point-to-Point WAN Topology:

Physical point-to-point topologies directly connect two nodes. In this arrangement, two nodes do not have to share the media with other hosts. Additionally, when using a serial communications protocol such as Point-to-Point Protocol (PPP), a node does not have to make any determination about whether an incoming frame is destined for it or another node. Therefore, the logical data link protocols can be very simple, as all frames on the media can only travel to or from the two nodes. The node places the frames on the media at one end and those frames are taken from the media by the node at the other end of the point-to-point circuit.

Point-to-point topologies are limited to two nodes.

A source and destination node may be indirectly connected to each other over some geographical distance using multiple intermediary devices. However, the use of physical devices in the network does not affect the logical topology. Adding intermediary physical connections may not change the logical topology. The logical point-to-point connection is the same.

In multiaccess LANs, end devices (i.e., nodes) are interconnected using star or extended star topologies. In this type of topology, end devices are connected to a central intermediary device, in this case, an Ethernet switch. An extended star extends this topology by interconnecting multiple Ethernet switches. The star and extended topologies are easy to install, very scalable (easy to add and remove end devices), and easy to troubleshoot. Early star topologies interconnected end devices using Ethernet hubs.

At times there may be only two devices connected on the Ethernet LAN. An example is two interconnected routers. This would be an example of Ethernet used on a point-to-point topology.

Legacy LAN Topologies

Early Ethernet and legacy Token Ring LAN technologies included two other types of topologies:

Bus - All end systems are chained to each other and terminated in some form on each end. Infrastructure devices such as switches are not required to interconnect the end devices. Legacy Ethernet networks were often bus topologies using coax cables because it was inexpensive and easy to set up.
Ring - End systems are connected to their respective neighbor forming a ring. The ring does not need to be terminated, unlike in the bus topology. Legacy Fiber Distributed Data Interface (FDDI) and Token Ring networks used ring topologies.

Half and Full Duplex Communication
Understanding duplex communication is important when discussing LAN topologies because it refers to the direction of data transmission between two devices. There are two common modes of duplex.

Half-duplex communication

Both devices can transmit and receive on the media but cannot do so simultaneously. WLANs and legacy bus topologies with Ethernet hubs use the half-duplex mode. Half-duplex allows only one device to send or receive at a time on the shared medium.

Full-duplex communication

Both devices can simultaneously transmit and receive on the shared media. The data link layer assumes that the media is available for transmission for both nodes at any time. Ethernet switches operate in full-duplex mode by default, but they can operate in half-duplex if connecting to a device such as an Ethernet hub.

In summary, half-duplex communications restrict the exchange of data to one direction at a time. Full-duplex allows the sending and receiving of data to happen simultaneously.

It is important that two interconnected interfaces, such as a host NIC and an interface on an Ethernet switch, operate using the same duplex mode. Otherwise, there will be a duplex mismatch creating inefficiency and latency on the link.

Access Control Methods - 

Ethernet LANs and WLANs are examples of multiaccess networks. A multiaccess network is a network that can have two or more end devices attempting to access the network simultaneously.

Some multiaccess networks require rules to govern how devices share the physical media. There are two basic access control methods for shared media:

Contention-based access

Controlled access

Contention-based access - 

In contention-based multiaccess networks, all nodes are operating in half-duplex, competing for the use of the medium. However, only one device can send at a time. Therefore, there is a process if more than one device transmits at the same time. Examples of contention-based access methods include the following:

Carrier sense multiple access with collision detection (CSMA/CD) used on legacy bus-topology Ethernet LANs;
Carrier sense multiple access with collision avoidance (CSMA/CA) used on Wireless LANs;

Controlled access

In a controlled-based multiaccess network, each node has its own time to use the medium. These deterministic types of legacy networks are inefficient because a device must wait its turn to access the medium. Examples of multiaccess networks that use controlled access include the following:

Legacy Token Ring
Legacy ARCNET

Contention-Based Access - CSMA/CD - 

Examples of contention-based access networks include the following:

Wireless LAN (uses CSMA/CA)
Legacy bus-topology Ethernet LAN (uses CSMA/CD)
Legacy Ethernet LAN using a hub (uses CSMA/CD)

These networks operate in half-duplex mode, meaning only one device can send or receive at a time. This requires a process to govern when a device can send and what happens when multiple devices send at the same time.

If two devices transmit at the same time, a collision will occur. For legacy Ethernet LANs, both devices will detect the collision on the network. This is the collision detection (CD) portion of CSMA/CD. The NIC compares data transmitted with data received, or by recognizing that the signal amplitude is higher than normal on the media. The data sent by both devices will be corrupted and will need to be resent.

PC1 has an Ethernet frame to send to PC3. The PC1 NIC needs to determine if any device is transmitting on the medium. If it does not detect a carrier signal (in other words, it is not receiving transmissions from another device), it will assume the network is available to send.

The Ethernet hub receives and sends the frame. An Ethernet hub is also known as a multiport repeater. Any bits received on an incoming port are regenerated and sent out all other ports.

If another device, such as PC2, wants to transmit, but is currently receiving a frame, it must wait until the channel is clear.

All devices attached to the hub will receive the frame. However, because the frame has a destination data link address for PC3, only that device will accept and copy in the entire frame. All other device NICs will ignore the frame.

Contention-Based Access - CSMA/CA - 

Another form of CSMA used by IEEE 802.11 WLANs is carrier sense multiple access/collision avoidance (CSMA/CA).

CMSA/CA uses a method similar to CSMA/CD to detect if the media is clear. CMSA/CA uses additional techniques. In wireless environments it may not be possible for a device to detect a collision. CMSA/CA does not detect collisions but attempts to avoid them by waiting before transmitting. Each device that transmits includes the time duration that it needs for the transmission. All other wireless devices receive this information and know how long the medium will be unavailable.

After a wireless device sends an 802.11 frame, the receiver returns an acknowledgment so that the sender knows the frame arrived.

Whether it is an Ethernet LAN using hubs, or a WLAN, contention-based systems do not scale well under heavy media use.

The Frame - 

The data link layer prepares the encapsulated data (usually an IPv4 or IPv6 packet) for transport across the local media by encapsulating it with a header and a trailer to create a frame.

The data link protocol is responsible for NIC-to-NIC communications within the same network. Although there are many different data link layer protocols that describe data link layer frames, each frame type has three basic parts:

Header;
Data;
Trailer;

Unlike other encapsulation protocols, the data link layer appends information in the form of a trailer at the end of the frame.

All data link layer protocols encapsulate the data within the data field of the frame. However, the structure of the frame and the fields contained in the header and trailer vary according to the protocol.

There is no one frame structure that meets the needs of all data transportation across all types of media. Depending on the environment, the amount of control information needed in the frame varies to match the access control requirements of the media and logical topology. For example, a WLAN frame must include procedures for collision avoidance and therefore requires additional control information when compared to an Ethernet frame.

Frame Fields - 

Framing breaks the stream into decipherable groupings, with control information inserted in the header and trailer as values in different fields. This format gives the physical signals a structure that are by recognized by nodes and decoded into packets at the destination.

Not all protocols include all these fields. The standards for a specific data link protocol define the actual frame format.

Frame fields include the following:

Frame start and stop indicator flags - Used to identify the beginning and end limits of the frame.
Addressing - Indicates the source and destination nodes on the media.
Type - Identifies the Layer 3 protocol in the data field.
Control - Identifies special flow control services such as quality of service (QoS). QoS gives forwarding priority to certain types of messages. For example, voice over IP (VoIP) frames normally receive priority because they are sensitive to delay.
Data - Contains the frame payload (i.e., packet header, segment header, and the data).
Error Detection - Included after the data to form the trailer.

Data link layer protocols add a trailer to the end of each frame. In a process called error detection, the trailer determines if the frame arrived without error. It places a logical or mathematical summary of the bits that comprise the frame in the trailer. The data link layer adds error detection because the signals on the media could be subject to interference, distortion, or loss that would substantially change the bit values that those signals represent.

A transmitting node creates a logical summary of the contents of the frame, known as the cyclic redundancy check (CRC) value. This value is placed in the frame check sequence (FCS) field to represent the contents of the frame. In the Ethernet trailer, the FCS provides a method for the receiving node to determine whether the frame experienced transmission errors.

Layer 2 Addresses - 

The data link layer provides the addressing used in transporting a frame across a shared local media. Device addresses at this layer are referred to as physical addresses. Data link layer addressing is contained within the frame header and specifies the frame destination node on the local network. It is typically at the beginning of the frame, so the NIC can quickly determine if it matches its own Layer 2 address before accepting the rest of the frame. The frame header may also contain the source address of the frame.

Unlike Layer 3 logical addresses, which are hierarchical, physical addresses do not indicate on what network the device is located. Rather, the physical address is unique to the specific device. A device will still function with the same Layer 2 physical address even if the device moves to another network or subnet. Therefore, Layer 2 addresses are only used to connect devices within the same shared media, on the same IP network.

The data link layer address is only used for local delivery. Addresses at this layer have no meaning beyond the local network. Compare this to Layer 3, where addresses in the packet header are carried from the source host to the destination host, regardless of the number of network hops along the route.

If the data must pass onto another network segment, an intermediary device, such as a router, is necessary. The router must accept the frame based on the physical address and de-encapsulate the frame in order to examine the hierarchical address, which is the IP address. Using the IP address, the router can determine the network location of the destination device and the best path to reach it. When it knows where to forward the packet, the router then creates a new frame for the packet, and the new frame is sent on to the next network segment toward its final destination.

LAN and WAN Frames - 

Ethernet protocols are used by wired LANs. Wireless communications fall under WLAN (IEEE 802.11) protocols. These protocols were designed for multiaccess networks.

WANs traditionally used other types of protocols for various types of point-to-point, hub-spoke, and full-mesh topologies. Some of the common WAN protocols over the years have included:

Point-to-Point Protocol (PPP);
High-Level Data Link Control (HDLC);
Frame Relay;
Asynchronous Transfer Mode (ATM);
X.25;
These Layer 2 protocols are now being replaced in the WAN by Ethernet.

In a TCP/IP network, all OSI Layer 2 protocols work with IP at OSI Layer 3. However, the Layer 2 protocol used depends on the logical topology and the physical media.

Each protocol performs media access control for specified Layer 2 logical topologies. This means that a number of different network devices can act as nodes that operate at the data link layer when implementing these protocols. These devices include the NICs on computers as well as the interfaces on routers and Layer 2 switches.

The Layer 2 protocol that is used for a particular network topology is determined by the technology used to implement that topology. The technology used is determined by the size of the network, in terms of the number of hosts and the geographic scope, and the services to be provided over the network.

A LAN typically uses a high bandwidth technology capable of supporting large numbers of hosts. The relatively small geographic area of a LAN (a single building or a multi-building campus) and its high density of users make this technology cost-effective.

However, using a high bandwidth technology is usually not cost-effective for WANs that cover large geographic areas (cities or multiple cities, for example). The cost of the long-distance physical links and the technology used to carry the signals over those distances typically results in lower bandwidth capacity.

The difference in bandwidth normally results in the use of different protocols for LANs and WANs.

Ethernet Frames - 

Ethernet Encapsulation - 

Ethernet is one of two LAN technologies used today, with the other being wireless LANs (WLANs). Ethernet uses wired communications, including twisted pair, fiber-optic links, and coaxial cables.

Ethernet operates in the data link layer and the physical layer. It is a family of networking technologies defined in the IEEE 802.2 and 802.3 standards. Ethernet supports data bandwidths of the following:

10 Mbps;
100 Mbps;
1000 Mbps (1 Gbps);
10,000 Mbps (10 Gbps);
40,000 Mbps (40 Gbps);
100,000 Mbps (100 Gbps);

Data Link Sublayers - 

IEEE 802 LAN/MAN protocols, including Ethernet, use the following two separate sublayers of the data link layer to operate. They are the Logical Link Control (LLC) and the Media Access Control (MAC);

Recall that LLC and MAC have the following roles in the data link layer:

LLC Sublayer - This IEEE 802.2 sublayer communicates between the networking software at the upper layers and the device hardware at the lower layers. It places information in the frame that identifies which network layer protocol is being used for the frame. This information allows multiple Layer 3 protocols, such as IPv4 and IPv6, to use the same network interface and media.
MAC Sublayer - This sublayer (IEEE 802.3, 802.11, or 802.15 for example) is implemented in hardware and is responsible for data encapsulation and media access control. It provides data link layer addressing and is integrated with various physical layer technologies.

MAC Sublayer - 

The MAC sublayer is responsible for data encapsulation and accessing the media.

Data Encapsulation

IEEE 802.3 data encapsulation includes the following:

Ethernet frame - This is the internal structure of the Ethernet frame.
Ethernet Addressing - The Ethernet frame includes both a source and destination MAC address to deliver the Ethernet frame from Ethernet NIC to Ethernet NIC on the same LAN.
Ethernet Error detection - The Ethernet frame includes a frame check sequence (FCS) trailer used for error detection.

Ethernet-IEEE 802.3

IEEE 802.3z
Gigabit Ethernet over Fiber
IEEE 802.3ab
Gigabit Ethernet over Copper
IEEE 802.3u
Fast Ethernet
802.3ae
10 Gigabit Ethernet over Fiber

Ethernet Frame Fields - 

The minimum Ethernet frame size is 64 bytes and the expected maximum is 1518 bytes. This includes all bytes from the destination MAC address field through the frame check sequence (FCS) field. The preamble field is not included when describing the size of the frame.

Note: The frame size may be larger if additional requirements are included, such as VLAN tagging.

Any frame less than 64 bytes in length is considered a “collision fragment” or “runt frame” and is automatically discarded by receiving stations. Frames with more than 1500 bytes of data are considered “jumbo” or “baby giant frames”.

If the size of a transmitted frame is less than the minimum, or greater than the maximum, the receiving device drops the frame. Dropped frames are likely to be the result of collisions or other unwanted signals. They are considered invalid. Jumbo frames are usually supported by most Fast Ethernet and Gigabit Ethernet switches and NICs.

Ethernet Frame Fields Detail - 

Field	Description

Preamble and Start Frame Delimiter Fields - 
The Preamble (7 bytes) and Start Frame Delimiter (SFD), also called the Start of Frame (1 byte), fields are used for synchronization between the sending and receiving devices. These first eight bytes of the frame are used to get the attention of the receiving nodes. Essentially, the first few bytes tell the receivers to get ready to receive a new frame.

Destination MAC Address Field - 
This 6-byte field is the identifier for the intended recipient. As you will recall, this address is used by Layer 2 to assist devices in determining if a frame is addressed to them. The address in the frame is compared to the MAC address in the device. If there is a match, the device accepts the frame. Can be a unicast, multicast or broadcast address.

Source MAC Address Field - 

This 6-byte field identifies the originating NIC or interface of the frame.

Type / Length - This 2-byte field identifies the upper layer protocol encapsulated in the Ethernet frame. Common values are, in hexadecimal, 0x800 for IPv4, 0x86DD for IPv6 and 0x806 for ARP.
Note: You may also see this field referred to as EtherType, Type, or Length.

Data Field - This field (46 - 1500 bytes) contains the encapsulated data from a higher layer, which is a generic Layer 3 PDU, or more commonly, an IPv4 
packet. All frames must be at least 64 bytes long. If a small packet is encapsulated, additional bits called a pad are used to increase the size of the frame to this minimum size.

Frame Check Sequence Field - The Frame Check Sequence (FCS) field (4 bytes) is used to detect errors in a frame. It uses a cyclic redundancy check (CRC). The sending device includes the results of a CRC in the FCS field of the frame. The receiving device receives the frame and generates a CRC to look for errors. If the calculations match, no error occurred. Calculations that do not match are an indication that the data has changed; therefore, the frame is dropped. A change in the data could be the result of a disruption of the electrical signals that represent the bits.

Ethernet MAC Address - 

In an Ethernet LAN, every network device is connected to the same, shared media. The MAC address is used to identify the physical source and destination devices (NICs) on the local network segment. MAC addressing provides a method for device identification at the data link layer of the OSI model.

All MAC addresses must be unique to the Ethernet device or Ethernet interface. To ensure this, all vendors that sell Ethernet devices must register with the IEEE to obtain a unique 6 hexadecimal (i.e., 24-bit or 3-byte) code called the organizationally unique identifier (OUI).

When a vendor assigns a MAC address to a device or Ethernet interface, the vendor must do as follows:

Use its assigned OUI as the first 6 hexadecimal digits.
Assign a unique value in the last 6 hexadecimal digits.

Frame Processing - 

Sometimes the MAC address is referred to as a burned-in address (BIA) because the address is hard coded into read-only memory (ROM) on the NIC. This means that the address is encoded into the ROM chip permanently.

When the computer boots up, the NIC copies its MAC address from ROM into RAM. When a device is forwarding a message to an Ethernet network, the Ethernet header includes these:

Source MAC address - This is the MAC address of the source device NIC.
Destination MAC address - This is the MAC address of the destination device NIC.

When a NIC receives an Ethernet frame, it examines the destination MAC address to see if it matches the physical MAC address that is stored in RAM. If there is no match, the device discards the frame. If there is a match, it passes the frame up the OSI layers, where the de-encapsulation process takes place.

Unicast MAC Address - 

In Ethernet, different MAC addresses are used for Layer 2 unicast, broadcast, and multicast communications.

A unicast MAC address is the unique address that is used when a frame is sent from a single transmitting device to a single destination device.

Note: The source MAC address must always be a unicast.

Broadcast MAC Address - 

An Ethernet broadcast frame is received and processed by every device on the Ethernet LAN. The features of an Ethernet broadcast are as follows:

It has a destination MAC address of FF-FF-FF-FF-FF-FF in hexadecimal (48 ones in binary);
It is flooded out all Ethernet switch ports except the incoming port;
It is not forwarded by a router;
If the encapsulated data is an IPv4 broadcast packet, this means the packet contains a destination IPv4 address that has all ones (1s) in the host portion. This numbering in the address means that all hosts on that local network (broadcast domain) will receive and process the packet;

The source host sends an IPv4 broadcast packet to all devices on its network. The IPv4 destination address is a broadcast address, 192.168.1.255. When the IPv4 broadcast packet is encapsulated in the Ethernet frame, the destination MAC address is the broadcast MAC address of FF-FF-FF-FF-FF-FF in hexadecimal (48 ones in binary).

DHCP for IPv4 is an example of a protocol that uses Ethernet and IPv4 broadcast addresses.

However, not all Ethernet broadcasts carry an IPv4 broadcast packet. For example, ARP Requests do not use IPv4, but the ARP message is sent as an Ethernet broadcast.

Multicast MAC Address - 

An Ethernet multicast frame is received and processed by a group of devices on the Ethernet LAN that belong to the same multicast group. The features of an Ethernet multicast are as follows:

There is a destination MAC address of 01-00-5E when the encapsulated data is an IPv4 multicast packet and a destination MAC address of 33-33 when the encapsulated data is an IPv6 multicast packet;
There are other reserved multicast destination MAC addresses for when the encapsulated data is not IP, such as Spanning Tree Protocol (STP) and Link Layer Discovery Protocol (LLDP);
It is flooded out all Ethernet switch ports except the incoming port, unless the switch is configured for multicast snooping;
It is not forwarded by a router, unless the router is configured to route multicast packets;
If the encapsulated data is an IP multicast packet, the devices that belong to a multicast group are assigned a multicast group IP address. The range of IPv4 multicast addresses is 224.0.0.0 to 239.255.255.255. The range of IPv6 multicast addresses begins with ff00::/8. Because multicast addresses represent a group of addresses (sometimes called a host group), they can only be used as the destination of a packet. The source will always be a unicast address.

As with the unicast and broadcast addresses, the multicast IP address requires a corresponding multicast MAC address to deliver frames on a local network. The multicast MAC address is associated with, and uses addressing information from, the IPv4 or IPv6 multicast address.

The MAC Address Table

Switch Fundamentals

A Layer 2 Ethernet switch uses Layer 2 MAC addresses to make forwarding decisions. It is completely unaware of the data (protocol) being carried in the data portion of the frame, such as an IPv4 packet, an ARP message, or an IPv6 ND packet. The switch makes its forwarding decisions based solely on the Layer 2 Ethernet MAC addresses.

An Ethernet switch examines its MAC address table to make a forwarding decision for each frame, unlike legacy Ethernet hubs that repeat bits out all ports except the incoming port.

Note: The MAC address table is sometimes referred to as a Content Addressable Memory (CAM) table. While the term CAM table is fairly common, for the purposes of this course, we will refer to it as a MAC address table.

Switch Learning and Forwarding - 

The switch dynamically builds the MAC address table by examining the source MAC address of the frames received on a port.  The switch forwards frames by searching for a match between the destination MAC address in the frame and an entry in the MAC address table.

Learn - 

Examine the Source MAC Address

Every frame that enters a switch is checked for new information to learn. It does this by examining the source MAC address of the frame and the port number where the frame entered the switch. If the source MAC address does not exist, it is added to the table along with the incoming port number. If the source MAC address does exist, the switch updates the refresh timer for that entry in the table. By default, most Ethernet switches keep an entry in the table for 5 minutes.

Note: If the source MAC address does exist in the table but on a different port, the switch treats this as a new entry. The entry is replaced using the same MAC address but with the more current port number.

Forwarded - 

Find the Destination MAC Address

If the destination MAC address is a unicast address, the switch will look for a match between the destination MAC address of the frame and an entry in its MAC address table. If the destination MAC address is in the table, it will forward the frame out the specified port. If the destination MAC address is not in the table, the switch will forward the frame out all ports except the incoming port. This is called an unknown unicast.

Note: If the destination MAC address is a broadcast or a multicast, the frame is also flooded out all ports except the incoming port.

Filtering Frames - 

As a switch receives frames from different devices, it is able to populate its MAC address table by examining the source MAC address of every frame. When the MAC address table of the switch contains the destination MAC address, it is able to filter the frame and forward out a single port.

Switch Speeds and Forwarding Methods - 

Frame Forwarding Methods on Cisco Switches - 

As you learned in the previous topic, switches use their MAC address tables to determine which port to use to forward frames. With Cisco switches, there are actually two frame forwarding methods and there are good reasons to use one instead of the other, depending on the situation.

Store-and-forward switching - This frame forwarding method receives the entire frame and computes the CRC. CRC uses a mathematical formula, based on the number of bits (1s) in the frame, to determine whether the received frame has an error. If the CRC is valid, the switch looks up the destination address, which determines the outgoing interface. Then the frame is forwarded out of the correct port.

Cut-through switching - This frame forwarding method forwards the frame before it is entirely received. At a minimum, the destination address of the frame must be read before the frame can be forwarded.

A big advantage of store-and-forward switching is that it determines if a frame has errors before propagating the frame. When an error is detected in a frame, the switch discards the frame. Discarding frames with errors reduces the amount of bandwidth consumed by corrupt data. Store-and-forward switching is required for quality of service (QoS) analysis on converged networks where frame classification for traffic prioritization is necessary.

Cut-Through Switching - 

In cut-through switching, the switch acts upon the data as soon as it is received, even if the transmission is not complete. The switch buffers just enough of the frame to read the destination MAC address so that it can determine to which port it should forward out the data. The destination MAC address is located in the first 6 bytes of the frame following the preamble. The switch looks up the destination MAC address in its switching table, determines the outgoing interface port, and forwards the frame onto its destination through the designated switch port. The switch does not perform any error checking on the frame.

There are two variants of cut-through switching:

Fast-forward switching - 

Fast-forward switching offers the lowest level of latency. Fast-forward switching immediately forwards a packet after reading the destination address. Because fast-forward switching starts forwarding before the entire packet has been received, there may be times when packets are relayed with errors. This occurs infrequently, and the destination NIC discards the faulty packet upon receipt. In fast-forward mode, latency is measured from the first bit received to the first bit transmitted. Fast-forward switching is the typical cut-through method of switching.

Fragment-free switching - 

In fragment-free switching, the switch stores the first 64 bytes of the frame before forwarding. Fragment-free switching can be viewed as a compromise between store-and-forward switching and fast-forward switching. The reason fragment-free switching stores only the first 64 bytes of the frame is that most network errors and collisions occur during the first 64 bytes. Fragment-free switching tries to enhance fast-forward switching by performing a small error check on the first 64 bytes of the frame to ensure that a collision has not occurred before forwarding the frame. Fragment-free switching is a compromise between the high latency and high integrity of store-and-forward switching, and the low latency and reduced integrity of fast-forward switching.

Some switches are configured to perform cut-through switching on a per-port basis until a user-defined error threshold is reached, and then they automatically change to store-and-forward. When the error rate falls below the threshold, the port automatically changes back to cut-through switching.


Memory Buffering on Switches - 

An Ethernet switch may use a buffering technique to store frames before forwarding them. Buffering may also be used when the destination port is busy because of congestion. The switch stores the frame until it can be transmitted.

Memory Buffering Methods - 

Method	Description - 

Port-based memory - 
	
Frames are stored in queues that are linked to specific incoming and outgoing ports.
A frame is transmitted to the outgoing port only when all the frames ahead in the queue have been successfully transmitted.
It is possible for a single frame to delay the transmission of all the frames in memory because of a busy destination port.
This delay occurs even if the other frames could be transmitted to open destination ports.

Shared memory - 
	
Deposits all frames into a common memory buffer shared by all switch ports and the amount of buffer memory required by a port is dynamically allocated.
The frames in the buffer are dynamically linked to the destination port enabling a packet to be received on one port and then transmitted on another port, without moving it to a different queue.

Shared memory buffering also results in the ability to store larger frames with potentially fewer dropped frames. This is important with asymmetric switching which allows for different data rates on different ports such as when connecting a server to a 10 Gbps switch port and PCs to 1 Gbps ports.


Network Layer Characteristics - 

The Network Layer - 

The network layer, or OSI Layer 3, provides services to allow end devices to exchange data across networks.

To accomplish end-to-end communications across network boundaries, network layer protocols perform four basic operations:

Addressing end devices - End devices must be configured with a unique IP address for identification on the network.

Addressing end devices - End devices must be configured with a unique IP address for identification on the network.

Encapsulation - The network layer encapsulates the protocol data unit (PDU) from the transport layer into a packet. The encapsulation process adds IP header information, such as the IP address of the source (sending) and destination (receiving) hosts. The encapsulation process is performed by the source of the IP packet.

Routing - The network layer provides services to direct the packets to a destination host on another network. To travel to other networks, the packet must be processed by a router. The role of the router is to select the best path and direct packets toward the destination host in a process known as routing. A packet may cross many routers before reaching the destination host. Each router a packet crosses to reach the destination host is called a hop.

De-encapsulation - When the packet arrives at the network layer of the destination host, the host checks the IP header of the packet. If the destination IP address within the header matches its own IP address, the IP header is removed from the packet. After the packet is de-encapsulated by the network layer, the resulting Layer 4 PDU is passed up to the appropriate service at the transport layer. The de-encapsulation process is performed by the destination host of the IP packet.

Unlike the transport layer (OSI Layer 4), which manages the data transport between the processes running on each host, network layer communication protocols (i.e., IPv4 and IPv6) specify the packet structure and processing used to carry the data from one host to another host. Operating without regard to the data carried in each packet allows the network layer to carry packets for multiple types of communications between multiple hosts.

IP Encapsulation - 

IP encapsulates the transport layer (the layer just above the network layer) segment or other data by adding an IP header. The IP header is used to deliver the packet to the destination host.

The process of encapsulating data layer by layer enables the services at the different layers to develop and scale without affecting the other layers. This means the transport layer segments can be readily packaged by IPv4 or IPv6 or by any new protocol that might be developed in the future.

The IP header is examined by Layer 3 devices (i.e., routers and Layer 3 switches) as it travels across a network to its destination. It is important to note, that the IP addressing information remains the same from the time the packet leaves the source host until it arrives at the destination host, except when translated by the device performing Network Address Translation (NAT) for IPv4.

Routers implement routing protocols to route packets between networks. The routing performed by these intermediary devices examines the network layer addressing in the packet header. In all cases, the data portion of the packet, that is, the encapsulated transport layer PDU or other data, remains unchanged during the network layer processes.

Characteristics of IP - 

IP was designed as a protocol with low overhead. It provides only the functions that are necessary to deliver a packet from a source to a destination over an interconnected system of networks. The protocol was not designed to track and manage the flow of packets. These functions, if required, are performed by other protocols at other layers, primarily TCP at Layer 4.

These are the basic characteristics of IP:

Connectionless - There is no connection with the destination established before sending data packets.

Best Effort - IP is inherently unreliable because packet delivery is not guaranteed.

Media Independent - Operation is independent of the medium (i.e., copper, fiber-optic, or wireless) carrying the data.

Connectionless - 

IP is connectionless, meaning that no dedicated end-to-end connection is created by IP before data is sent.

IP requires no initial exchange of control information to establish an end-to-end connection before packets are forwarded.

Best Effort - 

IP also does not require additional fields in the header to maintain an established connection. This process greatly reduces the overhead of IP. However, with no pre-established end-to-end connection, senders are unaware whether destination devices are present and functional when sending packets, nor are they aware if the destination receives the packet, or if the destination device is able to access and read the packet.

The IP protocol does not guarantee that all packets that are delivered are, in fact, received.

As an unreliable network layer protocol, IP does not guarantee that all sent packets will be received. Other protocols manage the process of tracking packets and ensuring their delivery.

Media Independent - 

Unreliable means that IP does not have the capability to manage and recover from undelivered or corrupt packets. This is because while IP packets are sent with information about the location of delivery, they do not contain information that can be processed to inform the sender whether delivery was successful. Packets may arrive at the destination corrupted, out of sequence, or not at all. IP provides no capability for packet retransmissions if errors occur.

If out-of-order packets are delivered, or packets are missing, then applications using the data, or upper layer services, must resolve these issues. This allows IP to function very efficiently. In the TCP/IP protocol suite, reliability is the role of the TCP protocol at the transport layer.

IP operates independently of the media that carry the data at lower layers of the protocol stack.

The OSI data link layer is responsible for taking an IP packet and preparing it for transmission over the communications medium. This means that the delivery of IP packets is not limited to any particular medium.

There is, however, one major characteristic of the media that the network layer considers: the maximum size of the PDU that each medium can transport. This characteristic is referred to as the maximum transmission unit (MTU). Part of the control communication between the data link layer and the network layer is the establishment of a maximum size for the packet. The data link layer passes the MTU value up to the network layer. The network layer then determines how large packets can be.

In some cases, an intermediate device, usually a router, must split up an IPv4 packet when forwarding it from one medium to another medium with a smaller MTU. This process is called fragmenting the packet, or fragmentation. Fragmentation causes latency. IPv6 packets cannot be fragmented by the router.

IPv4 Packet - 

IPv4 Packet Header - 

IPv4 is one of the primary network layer communication protocols. The IPv4 packet header is used to ensure that this packet is delivered to its next stop on the way to its destination end device.

IPv4 Packet Header Fields - 

Version - Contains a 4-bit binary value set to 0100 that identifies this as an IPv4 packet.

Differentiated Services or DiffServ (DS) - Formerly called the type of service (ToS) field, the DS field is an 8-bit field used to determine the priority of each packet. The six most significant bits of the DiffServ field are the differentiated services code point (DSCP) bits and the last two bits are the explicit congestion notification (ECN) bits.

Time to Live (TTL) – TTL contains an 8-bit binary value that is used to limit the lifetime of a packet. The source device of the IPv4 packet sets the initial TTL value. It is decreased by one each time the packet is processed by a router. If the TTL field decrements to zero, the router discards the packet and sends an Internet Control Message Protocol (ICMP) Time Exceeded message to the source IP address. Because the router decrements the TTL of each packet, the router must also recalculate the Header Checksum.

Protocol – This field is used to identify the next level protocol. This 8-bit binary value indicates the data payload type that the packet is carrying, which enables the network layer to pass the data to the appropriate upper-layer protocol. Common values include ICMP (1), TCP (6), and UDP (17).

Header Checksum – This is used to detect corruption in the IPv4 header.

Source IPv4 Address – This contains a 32-bit binary value that represents the source IPv4 address of the packet. The source IPv4 address is always a unicast address.

Destination IPv4 Address – This contains a 32-bit binary value that represents the destination IPv4 address of the packet. The destination IPv4 address is a unicast, multicast, or broadcast address.

IPv6 Packet - 

Limitations of IPv4 - 

IPv4 Packet Header Fields in the IPv6 Packet Header
One of the major design improvements of IPv6 over IPv4 is the simplified IPv6 header.

For example, the IPv4 header consists of a variable length header of 20 octets (up to 60 bytes if the Options field is used) and 12 basic header fields, not including the Options field and Padding field.

In contrast, the simplified IPv6 header shown the next figure consists of a fixed length header of 40 octets (largely due to the length of the source and destination IPv6 addresses).

IPv6 Packet Header

Version - This field contains a 4-bit binary value set to 0110 that identifies this as an IP version 6 packet.

Traffic Class - This 8-bit field is equivalent to the IPv4 Differentiated Services (DS) field.

Flow Label - This 20-bit field suggests that all packets with the same flow label receive the same type of handling by routers.

Payload Length - This 16-bit field indicates the length of the data portion or payload of the IPv6 packet. This does not include the length of the IPv6 
header, which is a fixed 40-byte header.

Next Header - This 8-bit field is equivalent to the IPv4 Protocol field. It indicates the data payload type that the packet is carrying, enabling the network layer to pass the data to the appropriate upper-layer protocol.

Hop Limit - This 8-bit field replaces the IPv4 TTL field. This value is decremented by a value of 1 by each router that forwards the packet. When the counter reaches 0, the packet is discarded, and an ICMPv6 Time Exceeded message is forwarded to the sending host,. This indicates that the packet did not reach its destination because the hop limit was exceeded. Unlike IPv4, IPv6 does not include an IPv6 Header Checksum, because this function is performed at both the lower and upper layers. This means the checksum does not need to be recalculated by each router when it decrements the Hop Limit field, which also improves network performance.

Source IPv6 Address - This 128-bit field identifies the IPv6 address of the sending host.

Destination IPv6 Address - This 128-bit field identifies the IPv6 address of the receiving host.

An IPv6 packet may also contain extension headers (EH), which provide optional network layer information. Extension headers are optional and are placed between the IPv6 header and the payload. EHs are used for fragmentation, security, to support mobility and more.

Unlike IPv4, routers do not fragment routed IPv6 packets.

Host Forwarding Decision - 

Another role of the network layer is to direct packets between hosts. A host can send a packet to the following:

Itself - A host can ping itself by sending a packet to a special IPv4 address of 127.0.0.1 or an IPv6 address ::1, which is referred to as the loopback interface. Pinging the loopback interface tests the TCP/IP protocol stack on the host.
Local host - This is a destination host that is on the same local network as the sending host. The source and destination hosts share the same network address.
Remote host - This is a destination host on a remote network. The source and destination hosts do not share the same network address.

Default Gateway - 

The default gateway is the network device (i.e., router or Layer 3 switch) that can route traffic to other networks.

Having a default gateway configured creates a default route in the routing table.

A default route is the route or pathway your computer will take when it tries to contact a remote network.

Host Routing Tables - 

route print;

netstat -r;

Entering netstat -r or route print will display three section:

Interface List - Lists the Media Access Control (MAC) address and assigned interface number of every network-capable interface on the host, including Ethernet, Wi-Fi, and Bluetooth adapters;
IPv4 Route Table - Lists all known IPv4 routes, including direct connections, local network, and local default routes;
IPv6 Route Table - Lists all known IPv6 routes, including direct connections, local network, and local default routes;

Router Packet Forwarding Decision - 

When a host sends a packet to another host, it consults its routing table to determine where to send the packet.
The router examines the destination IP address of the packet and searches its routing table to determine where to forward the packet.

The routing table contains a list of all known network addresses (prefixes) and where to forward the packet.
These entries are known as route entries or routes. The router will forward the packet using the best (longest) matching route entry.

IP Router Routing Table - 

	Directly-connected networks - These network route entries are active router interfaces. Routers add a directly connected route when an interface 	is configured with an IP address and is activated.

	Each router interface is connected to a different network segment.

	Remote networks - Remote networks - These network route entries are connected to other routers. Routers learn about remote networks either by 	being explicitly configured by an administrator or by exchanging route information using a dynamic routing protocol.
	
	Default route – Like a host, most routers also include a default route entry, a gateway of last resort. The default route is used when there is no 	better (longer) match in the IP routing table.

Static Routing - 

	Static routes are route entries that are manually configured.
	The static route includes the remote network address and the IP address of the next hop router.

	Static routing has the following characteristics:

	A static route must be configured manually.

	The administrator needs to reconfigure a static route if there is a change in the topology and the static route is no longer viable.

	A static route is appropriate for a small network and when there are few or no redundant links.

Dynamic Routing - 

Basic configuration only requires the network administrator to enable the directly connected networks within the dynamic routing protocol.

The dynamic routing protocol will automatically do as follows:

Discover remote networks;

Maintain up-to-date routing information;

Choose the best path to destination networks;

Attempt to find a new best path if the current path is no longer available;

Introduction to an IPv4 Routing Table - 

R1# show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override, p - overrides from PfR
Gateway of last resort is 209.165.200.226 to network 0.0.0.0
S*    0.0.0.0/0 [1/0] via 209.165.200.226, GigabitEthernet0/0/1
      10.0.0.0/24 is subnetted, 1 subnets
O        10.1.1.0 [110/2] via 209.165.200.226, 00:02:45, GigabitEthernet0/0/1
      192.168.10.0/24 is variably subnetted, 2 subnets, 2 masks
C        192.168.10.0/24 is directly connected, GigabitEthernet0/0/0
L        192.168.10.1/32 is directly connected, GigabitEthernet0/0/0
      209.165.200.0/24 is variably subnetted, 2 subnets, 2 masks
C        209.165.200.224/30 is directly connected, GigabitEthernet0/0/1
L        209.165.200.225/32 is directly connected, GigabitEthernet0/0/1
R1#

L - Directly connected local interface IP address
C – Directly connected network
S – Static route was manually configured by an administrator
O - OSPF
D - EIGRP

Address Resolution - 

MAC and IP - 

Destination on Same Network - 

There are two primary addresses assigned to a device on an Ethernet LAN:

Physical address (the MAC address) – Used for NIC to NIC communications on the same Ethernet network.

Logical address (the IP address) – Used to send the packet from the source device to the destination device. The destination IP address may be on the same IP network as the source or it may be on a remote network.

Layer 2 physical addresses (i.e., Ethernet MAC addresses) are used to deliver the data link frame with the encapsulated IP packet from one NIC to another NIC that is on the same network.

If the destination IP address is on the same network, the destination MAC address will be that of the destination device.

Destination on Remote Network - 

When the destination IP address (IPv4 or IPv6) is on a remote network, the destination MAC address will be the address of the host default gateway (i.e., the router interface).

The frame is specific to the data link technology that is associated with that link, such as Ethernet.

ARP Overview - 

If your network is using the IPv4 communications protocol, the Address Resolution Protocol, or ARP, is what you need to map IPv4 addresses to MAC addresses.

Every IP device on an Ethernet network has a unique Ethernet MAC address. When a device sends an Ethernet Layer 2 frame, it contains these two addresses:

Destination MAC address - The Ethernet MAC address of the destination device on the same local network segment. If the destination host is on another network, then the destination address in the frame would be that of the default gateway (i.e., router).

Source MAC address - The MAC address of the Ethernet NIC on the source host.

Device destination IPv4 addresses are either known or resolved by device name.

ARP provides two basic functions:

Resolving IPv4 addresses to MAC addresses;

Maintaining a table of IPv4 to MAC address mappings;

When a packet is sent to the data link layer to be encapsulated into an Ethernet frame, the device refers to a table in its memory to find the MAC address that is mapped to the IPv4 address. This table is stored temporarily in RAM memory and called the ARP table or the ARP cache.

The sending device will search its ARP table for a destination IPv4 address and a corresponding MAC address.

If the packet’s destination IPv4 address is on the same network as the source IPv4 address, the device will search the ARP table for the destination IPv4 address.

If the destination IPv4 address is on a different network than the source IPv4 address, the device will search the ARP table for the IPv4 address of the default gateway.

Each entry, or row, of the ARP table binds an IPv4 address with a MAC address. We call the relationship between the two values a map. This simply means that you can locate an IPv4 address in the table and discover the corresponding MAC address. The ARP table temporarily saves (caches) the mapping for the devices on the LAN.

An ARP request is sent when a device needs to determine the MAC address that is associated with an IPv4 address, and it does not have an entry for the IPv4 address in its ARP table.

ARP messages are encapsulated directly within an Ethernet frame. There is no IPv4 header. The ARP request is encapsulated in an Ethernet frame using the following header information:

Destination MAC address – This is a broadcast address FF-FF-FF-FF-FF-FF requiring all Ethernet NICs on the LAN to accept and process the ARP request.
Source MAC address – This is MAC address of the sender of the ARP request.
Type - ARP messages have a type field of 0x806. This informs the receiving NIC that the data portion of the frame needs to be passed to the ARP process.

Because ARP requests are broadcasts, they are flooded out all ports by the switch, except the receiving port. All Ethernet NICs on the LAN process broadcasts and must deliver the ARP request to its operating system for processing. Every device must process the ARP request to see if the target IPv4 address matches its own. A router will not forward broadcasts out other interfaces.

Only the device that originally sent the ARP request will receive the unicast ARP reply. After the ARP reply is received, the device will add the IPv4 address and the corresponding MAC address to its ARP table.

If no device responds to the ARP request, the packet is dropped because a frame cannot be created.

Entries in the ARP table are time stamped. If a device does not receive a frame from a particular device before the timestamp expires, the entry for this device is removed from the ARP table.

Static map entries can be entered in an ARP table, but this is rarely done. Static ARP table entries do not expire over time and must be manually removed.

On a Cisco router, the show ip arp command is used to display the ARP table;

On a Windows 10 PC, the arp –a command is used to display the ARP table;

ARP Issues - ARP Broadcasts and ARP Spoofing - 

ARP request is received and processed by every device on the local network.

A threat actor can use ARP spoofing to perform an ARP poisoning attack.

This is a technique used by a threat actor to reply to an ARP request for an IPv4 address that belongs to another device, such as the default gateway.

The threat actor sends an ARP reply with its own MAC address.

The receiver of the ARP reply will add the wrong MAC address to its ARP table and send these packets to the threat actor.

Enterprise level switches include mitigation techniques known as dynamic ARP inspection (DAI).

IPv6 Neighbor Discovery - 

IPv6 Neighbor Discovery Messages - 

Sometimes referred to as ND or NDP;

ND provides address resolution, router discovery, and redirection services for IPv6 using ICMPv6;

ICMPv6 ND uses five ICMPv6 messages to perform these services:

Neighbor Solicitation messages;

Neighbor Advertisement messages;

Router Solicitation messages;

Router Advertisement messages;

Redirect Message;

Neighbor Solicitation and Neighbor Advertisement messages are used for device-to-device messaging such as address resolution (similar to ARP for IPv4) - 

Devices include both host computers and routers;

Router Solicitation and Router Advertisement messages are for messaging between devices and routers - 

Typically router discovery is used for dynamic address allocation and stateless address autoconfiguration (SLAAC);

The fifth ICMPv6 ND message is a redirect message which is used for better next-hop selection.

IPv6 Neighbor Discovery - Address Resolution - 

ICMPv6 Neighbor Solicitation and Neighbor Advertisement messages are used for MAC address resolution;

This is similar to ARP Requests and ARP Replies used by ARP for IPv4;

IPv4 Address Structure - 

Network and Host Portions - 

IPv4 address is a 32-bit hierarchical address that is made up of a network portion and a host portion.

The Subnet Mask - 

IPv4 address - This is the unique IPv4 address of the host.
Subnet mask- This is used to identify the network/host portion of the IPv4 address.

A default gateway IPv4 address is required to reach remote networks and DNS server IPv4 addresses are required to translate domain names to IPv4 addresses.

The network address represents all the devices on the same network.

IPv4 host address (192.168.10.10) - The IPv4 address of the host in dotted decimal and binary formats.

Subnet mask (255.255.255.0) - The subnet mask of the host in dotted decimal and binary formats.

Network address (192.168.10.0) - The logical AND operation between the IPv4 address and subnet mask results in an IPv4 network address shown in dotted decimal and binary formats.

Network, Host, and Broadcast Addresses - 

Within each network are three types of IP addresses:

Network address;

Host addresses;

Broadcast address;

A device belongs to this network if it meets three criteria:

It has the same subnet mask as the network address.

It has the same network bits as the network address, as indicated by the subnet mask.

It is located on the same broadcast domain as other hosts with the same network address.

IPv4 Unicast, Broadcast, and Multicast - 

Unicast - Unicast transmission refers to one device sending a message to one other device in one-to-one communications.

A unicast packet has a destination IP address that is a unicast address which goes to a single recipient.

A source IP address can only be a unicast address, because the packet can only originate from a single source.

This is regardless of whether the destination IP address is a unicast, broadcast or multicast.

IPv4 unicast host addresses are in the address range of 1.0.0.1 to 223.255.255.255.


Broadcast - 

Broadcast transmission refers to a device sending a message to all the devices on a network in one-to-all communications;

IPv4 uses broadcast packets. However, there are no broadcast packets with IPv6.

A broadcast domain identifies all hosts on the same network segment.

A broadcast may be directed or limited.

A directed broadcast is sent to all hosts on a specific network.

A limited broadcast is sent to 255.255.255.255. By default, routers do not forward broadcasts.

IP Directed Broadcasts - 

192.168.1.0/24 is 192.168.1.255;

In addition to the 255.255.255.255 broadcast address, there is a broadcast IPv4 address for each network.

A device that is not directly connected to the destination network forwards an IP directed broadcast in the same way it would forward unicast IP packets destined to a host on that network.

When a directed broadcast packet reaches a router that is directly connected to the destination network, that packet is broadcast on the destination network.

Because of security concerns and prior abuse from malicious users, directed broadcasts are turned off by default starting with Cisco IOS Release 12.0 with the global configuration command no ip directed-broadcasts.

Multicast - 

Multicast transmission reduces traffic by allowing a host to send a single packet to a selected set of hosts that subscribe to a multicast group.

A multicast packet is a packet with a destination IP address that is a multicast address.

IPv4 has reserved the 224.0.0.0 to 239.255.255.255 addresses as a multicast range.

Hosts that receive particular multicast packets are called multicast clients.

The multicast clients use services requested by a client program to subscribe to the multicast group.

Each multicast group is represented by a single IPv4 multicast destination address.

When an IPv4 host subscribes to a multicast group, the host processes packets addressed to this multicast address, and packets addressed to its uniquely allocated unicast address.

Routers enabled with OSPF communicate with each other using the reserved OSPF multicast address 224.0.0.5.

Types of IPv4 Addresses - 

Public and Private IPv4 Addresses -

The Private Address Blocks 

10.0.0.0/8	10.0.0.0 - 10.255.255.255
172.16.0.0/12	172.16.0.0 - 172.31.255.255
192.168.0.0/16	192.168.0.0 - 192.168.255.255

Special Use IPv4 Addresses - 

Loopback addresses - 

Loopback addresses (127.0.0.0 /8 or 127.0.0.1 to 127.255.255.254) are more commonly identified as only 127.0.0.1, these are special addresses used by a host to direct traffic to itself.

Link-Local addresses - 

Link-local addresses (169.254.0.0 /16 or 169.254.0.1 to 169.254.255.254) are more commonly known as the Automatic Private IP Addressing (APIPA) addresses or self-assigned addresses.

Legacy Classful Addressing - 

In 1981, IPv4 addresses were assigned using classful addressing as defined in RFC 790 (https://tools.ietf.org/html/rfc790), Assigned Numbers. Customers were allocated a network address based on one of three classes, A, B, or C. The RFC divided the unicast ranges into specific classes as follows:

Class A (0.0.0.0/8 to 127.0.0.0/8) - Designed to support extremely large networks with more than 16 million host addresses. Class A used a fixed /8 prefix with the first octet to indicate the network address and the remaining three octets for host addresses (more than 16 million host addresses per network).
---
Class B (128.0.0.0 /16 - 191.255.0.0 /16) - Designed to support the needs of moderate to large size networks with up to approximately 65,000 host addresses. Class B used a fixed /16 prefix with the two high-order octets to indicate the network address and the remaining two octets for host addresses (more than 65,000 host addresses per network).
---
Class C (192.0.0.0 /24 - 223.255.255.0 /24) - Designed to support small networks with a maximum of 254 hosts. Class C used a fixed /24 prefix with the first three octets to indicate the network and the remaining octet for the host addresses (only 254 host addresses per network).
Note: There is also a Class D multicast block consisting of 224.0.0.0 to 239.0.0.0 and a Class E experimental address block consisting of 240.0.0.0 - 255.0.0.0.

Network Segmentation - 

Broadcast Domains and Segmentation - 

Each router interface connects to a broadcast domain and broadcasts are only propagated within that specific broadcast domain.

Problems with Large Broadcast Domains - 

A problem with a large broadcast domain is that these hosts can generate excessive broadcasts and negatively affect the network.

This results in slow network operations due to the significant amount of traffic it can cause, and slow device operations because a device must accept and process each broadcast packet.

The solution is to reduce the size of the network to create smaller broadcast domains in a process called subnetting.

These smaller network spaces are called subnets.

Reasons for Segmenting Networks - 

Subnetting reduces overall network traffic and improves network performance;

It also enables an administrator to implement security policies such as which subnets are allowed or not allowed to communicate together;

Another reason is that it reduces the number of devices affected by abnormal broadcast traffic due to misconfigurations, hardware/software problems, or malicious intent;

Subnet to Meet Requirements - 

Subnet Private versus Public IPv4 Address Space - 

Intranet - This is the internal part of a company’s network, accessible only within the organization. Devices in the intranet use private IPv4 addresses.

DMZ - This is part of the company’s network containing resources available to the internet such as a web server. Devices in the DMZ use public IPv4 addresses.

VLSM - 

IPv4 Address Conservation - 

VLSM allows a network space to be divided into unequal parts. With VLSM, the subnet mask will vary depending on how many bits have been borrowed for a particular subnet, thus the “variable” part of the VLSM.

VLSM is just subnetting a subnet.

This VLSM subnetting scheme reduces the number of addresses per subnet to a size appropriate for the networks that require fewer subnets.

When using VLSM, always begin by satisfying the host requirements of the largest subnet. Continue subnetting until the host requirements of the smallest subnet are satisfied.

Structured Design - 

You should develop an IPv4 addressing scheme for your entire network. 

You will need to know how many subnets you need, how many hosts a particular subnet requires, what devices are part of the subnet, which parts of your network use private addresses, and which use public, and many other determining factors.

A good addressing scheme allows for growth. A good addressing scheme is also the sign of a good network administrator.

Device Address Assignment - 

End user clients - Most networks allocate IPv4 addresses to client devices dynamically, using Dynamic Host Configuration Protocol (DHCP). This reduces the burden on network support staff and virtually eliminates entry errors. With DHCP, addresses are only leased for a period of time, and can be reused when the lease expires. This is an important feature for networks that support transient users and wireless devices. Changing the subnetting scheme means that the DHCP server needs to be reconfigured, and the clients must renew their IPv4 addresses. IPv6 clients can obtain address information using DHCPv6 or SLAAC.

Servers and peripherals - These should have a predictable static IP address. Use a consistent numbering system for these devices.

Servers that are accessible from the internet - Servers that need to be publicly available on the internet must have a public IPv4 address, most often accessed using NAT. In some organizations, internal servers (not publicly available) must be made available to the remote users. In most cases, these servers are assigned private addresses internally, and the user is required to create a virtual private network (VPN) connection to access the server. This has the same effect as if the user is accessing the server from a host within the intranet.

Intermediary devices - These devices are assigned addresses for network management, monitoring, and security. Because we must know how to communicate with intermediary devices, they should have predictable, statically assigned addresses.

Gateway - Routers and firewall devices have an IP address assigned to each interface which serves as the gateway for the hosts in that network. Typically, the router interface uses either the lowest or highest address in the network.

IPv6 - 

NAT is problematic for many applications, creates latency, and has limitations that severely impede peer-to-peer communications.

IPv4 and IPv6 Coexistence - 

Dual stack allows IPv4 and IPv6 to coexist on the same network segment. 

Dual stack devices run both IPv4 and IPv6 protocol stacks simultaneously.

Known as native IPv6, this means the customer network has an IPv6 connection to their ISP and is able to access content found on the internet over IPv6.

Tunneling is a method of transporting an IPv6 packet over an IPv4 network. The IPv6 packet is encapsulated inside an IPv4 packet, similar to other types of data.

Network Address Translation 64 (NAT64) allows IPv6-enabled devices to communicate with IPv4-enabled devices using a translation technique similar to NAT for IPv4. An IPv6 packet is translated to an IPv4 packet and an IPv4 packet is translated to an IPv6 packet.

Tunneling and translation are for transitioning to native IPv6 and should only be used where needed. The goal should be native IPv6 communications from source to destination.

IPv6 Address Types - Unicast, Multicast, Anycast

Unicast - An IPv6 unicast address uniquely identifies an interface on an IPv6-enabled device.

Multicast - An IPv6 multicast address is used to send a single IPv6 packet to multiple destinations.

Anycast - An IPv6 anycast address is any IPv6 unicast address that can be assigned to multiple devices. A packet sent to an anycast address is routed to the nearest device having that address. Anycast addresses are beyond the scope of this course.

IPv6 does not have a broadcast address. However, there is an IPv6 all-nodes multicast address that essentially gives the same result.

IPv6 Prefix Length - 

It is strongly recommended to use a 64-bit Interface ID for most networks.

This is because stateless address autoconfiguration (SLAAC) uses 64 bits for the Interface ID. It also makes subnetting easier to create and manage.

Types of IPv6 Unicast Addresses - 

A source IPv6 address must be a unicast address;





------------------------------------------------------------------------------||------------------------------------------------------------------------------||----------------------------------------------------------------------------




IPV6

The all-0s address can also be used, but is reserved as a Subnet-Router anycast address, and should be assigned only to routers;
An IPv6 link-local address (LLA) enables a device to communicate with other IPv6-enabled devices on the same link and only on that link (subnet);
The GUA is not a requirement. However, every IPv6-enabled network interface must have an LLA;
If an LLA is not configured manually on an interface, the device will automatically create its own without communicating with a DHCP server;

IPv6-enabled hosts create an IPv6 LLA even if the device has not been assigned a global unicast IPv6 address; 

This allows IPv6-enabled devices to communicate with other IPv6-enabled devices on the same subnet. This includes communication with the default gateway (router).

Routers use the LLA of neighbor routers to send routing updates;

Hosts use the LLA of a local router as the default-gateway;

Typically, it is the LLA of the router, and not the GUA, that is used as the default gateway for other devices on the link;

There are two ways that a device can obtain an LLA:

Statically - This means the device has been manually configured;

Dynamically - This means the device creates its own interface ID by using randomly generated values or using the Extended Unique Identifier (EUI) method, which uses the client MAC address along with additional bits;

Alternatively, the default gateway address can be configured to match the LLA of the GigabitEthernet interface;

Using the LLA of the router as the default gateway address is considered best practice;

Either configuration will work;

There are two ways in which a device can obtain an IPv6 GUA automatically:

Stateless Address Autoconfiguration (SLAAC);
Stateful DHCPv6;
SLAAC and DHCPv6 are covered in the next topic;

Note: When DHCPv6 or SLAAC is used, the LLA of the router will automatically be specified as the default gateway address;

Static Configuration of a Link-Local Unicast Address - 

Typically, it is only necessary to create recognizable LLAs on routers. This is beneficial because router LLAs are used as default gateway addresses and in routing advertisement messages;

EXEAMPLE:

R1(config)# interface gigabitethernet 0/0/0
R1(config-if)# ipv6 address fe80::1:1 link-local
R1(config-if)# exit
R1(config)# interface gigabitethernet 0/0/1
R1(config-if)# ipv6 address fe80::2:1 link-local
R1(config-if)# exit
R1(config)# interface serial 0/1/0
R1(config-if)# ipv6 address fe80::3:1 link-local
R1(config-if)# exit

All the interfaces of router R1 have been configured with an LLA that begins with fe80::n:1;

The exact same LLA could be configured on each link as long as it is unique on that link;

This is because LLAs only have to be unique on that link;

However, common practice is to create a different LLA on each interface of the router to make it easy to identify the router and the specific interface;

Dynamic Addressing for IPv6 GUAs - 

RS and RA Messages - 

For the GUA, a device obtains the address dynamically through Internet Control Message Protocol version 6 (ICMPv6) messages;

IPv6 routers periodically send out ICMPv6 RA messages, every 200 seconds, to all IPv6-enabled devices on the network;

RA message will also be sent in response to a host sending an ICMPv6 RS message, which is a request for an RA message;

RS messages are sent to all IPv6 routers by hosts requesting addressing information -

RA messages are sent to all IPv6 nodes. If Method 1 (SLAAC only) is used, the RA includes network prefix, prefix-length, and default-gateway information - 

RA messages are on IPv6 router Ethernet interfaces;

To enable a router as an IPv6 router, the ipv6 unicast-routing global configuration command must be used;

ICMPv6 RA message is a suggestion to a device on how to obtain an IPv6 GUA;

The ultimate decision is up to the device operating system;

RA - 

Network prefix and prefix length - This tells the device which network it belongs to;

Default gateway address - This is an IPv6 LLA, the source IPv6 address of the RA message;

DNS addresses and domain name - These are the addresses of DNS servers and a domain name;

three methods for RA messages:

Method 1: SLAAC - “I have everything you need including the prefix, prefix length, and default gateway address.”

Method 2: SLAAC with a stateless DHCPv6 server - “Here is my information but you need to get other information such as DNS addresses from a stateless DHCPv6 server.”

Method 3: Stateful DHCPv6 (no SLAAC) - “I can give you your default gateway address. You need to ask a stateful DHCPv6 server for all your other information.”

Method 1: SLAAC

SLAAC is a method that allows a device to create its own GUA without the services of DHCPv6;

Devices rely on the ICMPv6 RA messages of the local router to obtain the necessary information;

By default, the RA message suggests that the receiving device use the information in the RA message to create its own IPv6 GUA and all other necessary information;

SLAAC is stateless, which means there is no central server (for example, a stateful DHCPv6 server) allocating GUAs and keeping a list of devices and their addresses;

With SLAAC, the client device uses the information in the RA message to create its own GUA;

Prefix - This is advertised in the RA message;

Interface ID - This uses the EUI-64 process or by generating a random 64-bit number, depending on the device operating system;

The router sends an RA message with the prefix for the local link;

The PC uses SLAAC to obtain a prefix from the RA message and creates its own Interface ID;


Method 2: SLAAC and Stateless DHCPv6 - 

A router interface can be configured to send a router advertisement using SLAAC and stateless DHCPv6;

The RA message suggests devices use the following:

SLAAC to create its own IPv6 GUA;

The router LLA, which is the RA source IPv6 address, as the default gateway address;

A stateless DHCPv6 server to obtain other information such as a DNS server address and a domain name;

A stateless DHCPv6 server distributes DNS server addresses and domain names. It does not allocate GUAs;

The PC sends an RS to all IPv6 routers, “I need addressing information.”;

The router sends an RA message to all IPv6 nodes with Method 2 (SLAAC and DHCPv6) specified. “Here is your prefix, prefix-length, and default gateway information. But you will need to get DNS information from a DHCPv6 server.”;

The PC sends a DHCPv6 Solicit message to all DHCPv6 servers. "I used SLAAC to create my IPv6 address and get my default gateway address, but I need other information from a stateless DHCPv6 server.";

Method 3: Stateful DHCPv6 -

A router interface can be configured to send an RA using stateful DHCPv6 only;

Stateful DHCPv6 is similar to DHCP for IPv4;

A device can automatically receive its addressing information including a GUA, prefix length, and the addresses of DNS servers from a stateful DHCPv6 server;

RA message suggests devices use the following:

The router LLA, which is the RA source IPv6 address, for the default gateway address;

A stateful DHCPv6 server to obtain a GUA, DNS server address, domain name and other necessary information;

The PC sends an RS to all IPv6 routers, “I need addressing information.”;

The router sends an RA message to all IPv6 nodes with Method 3 (Stateful DHCPv6) specified, “I am your default gateway, but you need to ask a stateful DHCPv6 server for your IPv6 address and other addressing information.";

The PC sends a DHCPv6 Solicit message to all DHCPv6 servers, "I received my default gateway address from the RA message, but I need an IPv6 address and all other addressing information from a stateful DHCPv6 server.";

A stateful DHCPv6 server allocates and maintains a list of which device receives which IPv6 address. DHCP for IPv4 is stateful;

The default gateway address can only be obtained dynamically from the RA message;

The stateless or stateful DHCPv6 server does not provide the default gateway address;

EUI-64 Process vs. Randomly Generated -

When the RA message is either SLAAC or SLAAC with stateless DHCPv6, the client must generate its own interface ID;

The client knows the prefix portion of the address from the RA message, but must create its own interface ID;

The interface ID can be created using the EUI-64 process or a randomly generated 64-bit number;

The router sends an RA message;

The PC uses the prefix in the RA message and uses either EUI-64 or a random 64-bit number to generate an interface ID;

EUI-64 Process -

IEEE defined the Extended Unique Identifier (EUI) or modified EUI-64 process;

This process uses the 48-bit Ethernet MAC address of a client, and inserts another 16 bits in the middle of the 48-bit MAC address to create a 64-bit interface ID;

An EUI-64 Interface ID is represented in binary and is made up of three parts:

24-bit OUI from the client MAC address, but the 7th bit (the Universally/Locally (U/L) bit) is reversed;

This means that if the 7th bit is a 0, it becomes a 1, and vice versa;

The inserted 16-bit value fffe (in hexadecimal);

24-bit Device Identifier from the client MAC address;

To ensure the uniqueness of any IPv6 unicast address, the client may use a process known as Duplicate Address Detection (DAD);

This is similar to an ARP request for its own address. If there is no reply, then the address is unique.

Dynamic LLAs -

All IPv6 devices must have an IPv6 LLA;

Cisco routers automatically create an IPv6 LLA whenever a GUA is assigned to the interface;

IPv6 Multicast Addresses - 

IPv6 multicast addresses have the prefix ff00::/8;

Multicast addresses can only be destination addresses and not source addresses;

There are two types of IPv6 multicast addresses:

Well-known multicast addresses;
Solicited node multicast addresses;

Well-Known IPv6 Multicast Addresses - 

Well-known IPv6 multicast addresses are assigned;

Assigned multicast addresses are reserved multicast addresses for predefined groups of devices;

An assigned multicast address is a single address used to reach a group of devices running a common protocol or service;

ff02::1 All-nodes multicast group -

This is a multicast group that all IPv6-enabled devices join;

A packet sent to this group is received and processed by all IPv6 interfaces on the link or network;

ff02::2 All-routers multicast group -

This is a multicast group that all IPv6 routers join;

A router becomes a member of this group when it is enabled as an IPv6 router with the ipv6 unicast-routing global configuration command;

Solicited-Node IPv6 Multicast Addresses - 

A solicited-node multicast address is similar to the all-nodes multicast address;

The advantage of a solicited-node multicast address is that it is mapped to a special Ethernet multicast address;

This allows the Ethernet NIC to filter the frame by examining the destination MAC address without sending it to the IPv6 process to see if the device is the intended target of the IPv6 packet;

Subnet an IPv6 Network -

GUA with a 16-bit Subnet ID -

16-bit subnet ID - Creates up to 65,536 subnets;
64-bit interface ID - Supports up to 18 quintillion host IPv6 addresses per subnet (i.e., 18,000,000,000,000,000,000);

ICMP Messages -

ICMPv4 and ICMPv6 Messages -

The TCP/IP suite does provide for error messages and informational messages when communicating with another IP device;

These messages are sent using the services of ICMP;

The purpose of these messages is to provide feedback about issues related to the processing of IP packets under certain conditions, not to make IP reliable;

The ICMP messages common to both ICMPv4 and ICMPv6 and discussed in this module include:

Host reachability -

An ICMP Echo Message can be used to test the reachability of a host on an IP network;

The local host sends an ICMP Echo Request to a host;

If the host is available, the destination host responds with an Echo Reply;

Destination or Service Unreachable -

When a host or gateway receives a packet that it cannot deliver, it can use an ICMP Destination Unreachable message to notify the source that the destination or service is unreachable;

CODES - Destination Unreachable codes for ICMPv4 :

0 - Net unreachable;
1 - Host unreachable;
2 - Protocol unreachable;
3 - Port unreachable;
CODES - Destination Unreachable codes for ICMPv6 are as follows:

0 - No route to destination
1 - Communication with the destination is administratively prohibited (e.g., firewall)
2 – Beyond scope of the source address
3 - Address unreachable
4 - Port unreachable

Time exceeded -

ICMPv4 Time Exceeded message is used by a router to indicate that a packet cannot be forwarded because the Time to Live (TTL) field of the packet was decremented to 0;

If a router receives a packet and decrements the TTL field in the IPv4 packet to zero, it discards the packet and sends a Time Exceeded message to the source host;

ICMPv6 also sends a Time Exceeded message if the router cannot forward an IPv6 packet because the packet has expired;

Instead of the IPv4 TTL field, ICMPv6 uses the IPv6 Hop Limit field to determine if the packet has expired;

ICMPv6 Messages -

ICMPv6 messages are encapsulated in IPv6;

ICMPv6 includes four new protocols as part of the Neighbor Discovery Protocol (ND or NDP);

Messaging between an IPv6 router and an IPv6 device, including dynamic address allocation are as follows:

Router Solicitation (RS) message -

An IPv6-enabled router will also send out an RA message in response to an RS message;

Router Advertisement (RA) message -

RA messages are sent by IPv6-enabled routers every 200 seconds to provide addressing information to IPv6-enabled hosts;

The RA message can include addressing information for the host such as the prefix, prefix length, DNS address, and domain name;


Messaging between IPv6 devices, including duplicate address detection and address resolution are as follows:

Neighbor Solicitation (NS) message -

When a device is assigned a global IPv6 unicast or link-local unicast address, it may perform duplicate address detection (DAD) to ensure that the IPv6 address is unique;

To check the uniqueness of an address, the device will send an NS message with its own IPv6 address as the targeted IPv6 address;

If another device on the network has this address, it will respond with an NA message;

Neighbor Advertisement (NA) message -

Address resolution is used when a device on the LAN knows the IPv6 unicast address of a destination but does not know its Ethernet MAC address;

To determine the MAC address for the destination, the device will send an NS message to the solicited node address;

The message will include the known (targeted) IPv6 address;

The device that has the targeted IPv6 address will respond with an NA message containing its Ethernet MAC address;




----------------------------||--------------------------------------------------------------------------||------------------------------------------------------------------||--------------------------------------------------------------



Transport Layer - 

Transportation of Data -

Role of the Transport Layer -

Application layer programs generate data that must be exchanged between source and destination hosts;

The transport layer is responsible for logical communications between applications running on different hosts;

This may include services such as establishing a temporary session between two hosts and the reliable transmission of information for an application;

The transport layer has no knowledge of the destination host type, the type of media over which the data must travel, the path taken by the data, the congestion on a link, or the size of the network;

Transport Layer Responsibilities  -

Tracking Individual Conversations - 

Each set of data flowing between a source application and a destination application is known as a conversation and is tracked separately;

It is the responsibility of the transport layer to maintain and track these multiple conversations;

A host may have multiple applications that are communicating across the network simultaneously;

Most networks have a limitation on the amount of data that can be included in a single packet. Therefore, data must be divided into manageable pieces;

Segmenting Data and Reassembling Segments -

It is the transport layer responsibility to divide the application data into appropriately sized blocks;

The transport layer divides the data into smaller blocks (i.e., segments or datagrams) that are easier to manage and transport;

Add Header Information - 

The transport layer protocol also adds header information containing binary data organized into several fields to each block of data;

It is the values in these fields that enable various transport layer protocols to perform different functions in managing data communication;

The transport layer ensures that even with multiple application running on a device, all applications receive the correct data;

Identifying the Applications -

The transport layer must be able to separate and manage multiple communications with different transport requirement needs;

To pass data streams to the proper applications, the transport layer identifies the target application using an identifier called a port number - | 

Each software process that needs to access the network is assigned a port number unique to that host;

Conversation Multiplexing -

Sending some types of data (e.g., a streaming video) across a network, as one complete communication stream, can consume all the available bandwidth;

This would prevent other communication conversations from occurring at the same time;

It would also make error recovery and retransmission of damaged data difficult;

Error checking can be performed on the data in the segment, to determine if the segment was altered during transmission;

Transport Layer Protocols - 

IP is concerned only with the structure, addressing, and routing of packets;

IP does not specify how the delivery or transportation of the packets takes place;

Transport layer protocols specify how to transfer messages between hosts, and are responsible for managing reliability requirements of a conversation;

Transmission Control Protocol (TCP) -

IP is concerned only with the structure, addressing, and routing of packets, from original sender to final destination;

IP is not responsible for guaranteeing delivery or determining whether a connection between the sender and receiver needs to be established;

TCP is considered a reliable, full-featured transport layer protocol, which ensures that all of the data arrives at the destination;

TCP includes fields which ensure the delivery of the application data;

These fields require additional processing by the sending and receiving hosts;

TCP divides data into segments;

TCP provides reliability and flow control using these basic operations :-
	Number and track data segments transmitted to a specific host from a specific application;
	Acknowledge received data;
	Retransmit any unacknowledged data after a certain amount of time;
	Sequence data that might arrive in wrong order;
	Send data at an efficient rate that is acceptable by the receiver
In order to maintain the state of a conversation and track the information, TCP must first establish a connection between the sender and the receiver;

This is why TCP is known as a connection-oriented protocol;

User Datagram Protocol (UDP) - 

UDP is a simpler transport layer protocol than TCP;

It does not provide reliability and flow control, which means it requires fewer header fields;

Because the sender and the receiver UDP processes do not have to manage reliability and flow control, this means UDP datagrams can be processed faster than TCP segments;

UDP provides the basic functions for delivering datagrams between the appropriate applications, with very little overhead and data checking;

UDP divides data into datagrams that are also referred to as segments;

UDP is a connectionless protocol;

UDP does not provide reliability or flow control, it does not require an established connection;

UDP does not track information sent or received between the client and server, UDP is also known as a stateless protocol.

UDP is also known as a best-effort delivery protocol because there is no acknowledgment that the data is received at the destination;

The Right Transport Layer Protocol for the Right Application -

For these applications, UDP is the better choice because it requires less network overhead;

UDP is preferable for applications such as Voice over IP (VoIP);

Acknowledgments and retransmission would slow down delivery and make the voice conversation unacceptable;

UDP is also used by request-and-reply applications where the data is minimal, and retransmission can be done quickly;

Some applications can tolerate some data loss during transmission over the network, but delays in transmission are unacceptable;

If one or two segments of a live video stream fail to arrive, it creates a momentary disruption in the stream;

This may appear as distortion in the image or sound, but may not be noticeable to the user;

TCP - Applications such as databases, web browsers, and email clients, require that all data that is sent arrives at the destination in its original condition;

TCP - Any missing data could corrupt a communication, making it either incomplete or unreadable;

Application developers must choose which transport protocol type is appropriate based on the requirements of the applications;

Video may be sent over TCP or UDP - Applications that stream stored audio and video typically use TCP;

The application uses TCP to perform buffering, bandwidth probing, and congestion control, in order to better control the user experience;

Real-time video and voice usually use UDP, but may also use TCP, or both UDP and TCP;

A video conferencing application may use UDP by default, but because many firewalls block UDP, the application can also be sent over TCP;

Applications that stream stored audio and video use TCP;

If your network suddenly cannot support the bandwidth needed to watch an on-demand movie, the application pauses the playback;

During the pause, you might see a “buffering...” message while TCP works to re-establish the stream;

When all the segments are in order and a minimum level of bandwidth is restored, your TCP session resumes, and the movie resumes playing;

TCP Overview -

TCP Features -

To understand the differences between TCP and UDP, it is important to understand how each protocol implements specific reliability features and how each protocol tracks conversations;

In addition to supporting the basic functions of data segmentation and reassembly, TCP also provides the following services:

Establishes a Session - TCP is a connection-oriented protocol that negotiates and establishes a permanent connection (or session) between source and destination devices prior to forwarding any traffic - Through session establishment, the devices negotiate the amount of traffic that can be forwarded at a given time, and the communication data between the two can be closely managed;

Ensures Reliable Delivery - For many reasons, it is possible for a segment to become corrupted or lost completely, as it is transmitted over the network - TCP ensures that each segment that is sent by the source arrives at the destination;

Provides Same-Order Delivery - Because networks may provide multiple routes that can have different transmission rates, data can arrive in the wrong order - By numbering and sequencing the segments, TCP ensures segments are reassembled into the proper order;

Supports Flow Control - Network hosts have limited resources (i.e., memory and processing power) - When TCP is aware that these resources are overtaxed, it can request that the sending application reduce the rate of data flow - This is done by TCP regulating the amount of data the source transmits - Flow control can prevent the need for retransmission of the data when the resources of the receiving host are overwhelmed;

TCP Header -

TCP is a stateful protocol which means it keeps track of the state of the communication session;

To track the state of a session, TCP records which information it has sent and which information has been acknowledged;

The stateful session begins with the session establishment and ends with the session termination;

A TCP segment adds 20 bytes (i.e., 160 bits) of overhead when encapsulating the application layer data;

TCP Header Fields -

TCP Header Field	Description
Source Port		A 16-bit field used to identify the source application by port number;
Destination Port	A 16-bit field used to identify the destination application by port number;
Sequence Number		A 32-bit field used for data reassembly purposes;
Acknowledgment Number	A 32-bit field used to indicate that data has been received and the next byte expected from the source.
Header Length		A 4-bit field known as ʺdata offsetʺ that indicates the length of the TCP segment header.
Reserved		A 6-bit field that is reserved for future use.
Control bits		A 6-bit field that includes bit codes, or flags, which indicate the purpose and function of the TCP segment.
Window size		A 16-bit field used to indicate the number of bytes that can be accepted at one time.
Checksum		A 16-bit field used for error checking of the segment header and data.
Urgent			A 16-bit field used to indicate if the contained data is urgent.

TCP handles all tasks associated with dividing the data stream into segments, providing reliability, controlling data flow, and reordering segments;

TCP frees the application from having to manage any of these tasks;

Applications can simply send the data stream to the transport layer and use the services of TCP;

UDP Overview -

UDP Features -

UDP is a best-effort transport protocol;

UDP is a lightweight transport protocol that offers the same data segmentation and reassembly as TCP, but without TCP reliability and flow control;

UDP is such a simple protocol that it is usually described in terms of what it does not do compared to TCP;

UDP features include the following:

Data is reconstructed in the order that it is received;
Any segments that are lost are not resent;
There is no session establishment;
The sending is not informed about resource availability;

UDP Header -

UDP is a stateless protocol, meaning neither the client, nor the server, tracks the state of the communication session;

If reliability is required when using UDP as the transport protocol, it must be handled by the application;

One of the most important requirements for delivering live video and voice over the network is that the data continues to flow quickly;

Live video and voice applications can tolerate some data loss with minimal or no noticeable effect, and are perfectly suited to UDP;

The blocks of communication in UDP are called datagrams, or segments;

These datagrams are sent as best effort by the transport layer protocol;

The UDP header is far simpler than the TCP header because it only has four fields and requires 8 bytes (i.e., 64 bits);

UDP Header Fields -

UDP Header Field	Description
Source Port		A 16-bit field used to identify the source application by port number;
Destination Port	A 16-bit field used to identify the destination application by port number;
Length			A 16-bit field that indicates the length of the UDP datagram header;
Checksum		A 16-bit field used for error checking of the datagram header and data;

Applications that use UDP -

There are three types of applications that are best suited for UDP:

Live video and multimedia applications - These applications can tolerate some data loss, but require little or no delay. Examples include VoIP and live streaming video;

Simple request and reply applications - Applications with simple transactions where a host sends a request and may or may not receive a reply. Examples include DNS and DHCP;

Applications that handle reliability themselves - Unidirectional communications where flow control, error detection, acknowledgments, and error recovery is not required, or can be handled by the application - Examples include SNMP and TFTP;

Although DNS and SNMP use UDP by default, both can also use TCP - DNS will use TCP if the DNS request or DNS response is more than 512 bytes, such as when a DNS response includes many name resolutions - Similarly, under some situations the network administrator may want to configure SNMP to use TCP.

Port Numbers -

Multiple Separate Communications -

No matter what type of data is being transported, both TCP and UDP use port numbers;

The source port number is associated with the originating application on the local host whereas the destination port number is associated with the destination application on the remote host;

When the host initiates the web page request, the source port number is dynamically generated by the host to uniquely identify the conversation;

Each request generated by a host will use a different dynamically created source port number;

This process allows multiple conversations to occur simultaneously;

Socket Pairs -

The combination of the source IP address and source port number, or the destination IP address and destination port number is known as a socket;

The socket is used to identify the server and service being requested by the client;

A client socket might look like this, with 1099 representing the source port number: 192.168.1.5:1099;

Sockets enable multiple processes, running on a client, to distinguish themselves from each other, and multiple connections to a server process to be distinguished from each other;

Port Number Groups -

The Internet Assigned Numbers Authority (IANA) is the standards organization responsible for assigning various addressing standards, including the 16-bit port numbers;

The 16 bits used to identify the source and destination port numbers provides a range of ports from 0 through 65535;

Well-known Ports 0 to 1,023 -

These port numbers are reserved for common or popular services and applications such as web browsers, email clients, and remote access clients;

Defined well-known ports for common server applications enables clients to easily identify the associated service required;

Registered Ports 1,024 to 49,151 -

These port numbers are assigned by IANA to a requesting entity to use with specific processes or applications;

These processes are primarily individual applications that a user has chosen to install, rather than common applications that would receive a well-known port number;

Cisco has registered port 1812 for its RADIUS server authentication process;

Private and/or Dynamic Ports 49,152 to 65,535 -

These ports are also known as ephemeral ports;

The client’s OS usually assign port numbers dynamically when a connection to a service is initiated;

The dynamic port is then used to identify the client application during communication;

Note: Some client operating systems may use registered port numbers instead of dynamic port numbers for assigning source ports;

The netstat Command -

Unexplained TCP connections can pose a major security threat;

They can indicate that something or someone is connected to the local host;

Netstat is an important network utility that can be used to verify those connections;

The netstat command will attempt to resolve IP addresses to domain names and port numbers to well-known applications;

The -n option can be used to display IP addresses and port numbers in their numerical form;

TCP Communication Process -

TCP Server Processes -

An individual server cannot have two services assigned to the same port number within the same transport layer services;

An active server application assigned to a specific port is considered open, which means that the transport layer accepts, and processes segments addressed to that port;

Any incoming client request addressed to the correct socket is accepted, and the data is passed to the server application;

There can be many ports open simultaneously on a server, one for each active server application;

TCP Connection Establishment -

TCP connections, the host client establishes the connection with the server using the three-way handshake process;

Step 1. SYN

The initiating client requests a client-to-server communication session with the server;

Step 2. ACK and SYN

The server acknowledges the client-to-server communication session and requests a server-to-client communication session;

Step 3. ACK

The initiating client acknowledges the server-to-client communication session;

The three-way handshake validates that the destination host is available to communicate;

Session Termination -

To close a connection, the Finish (FIN) control flag must be set in the segment header;

To end each one-way TCP session, a two-way handshake, consisting of a FIN segment and an Acknowledgment (ACK) segment, is used;

Therefore, to terminate a single conversation supported by TCP, four exchanges are needed to end both sessions;

Either the client or the server can initiate the termination;

Step 1. FIN

When the client has no more data to send in the stream, it sends a segment with the FIN flag set;

Step 2. ACK

The server sends an ACK to acknowledge the receipt of the FIN to terminate the session from client to server.

Step 3. FIN

The server sends a FIN to the client to terminate the server-to-client session;

Step 4. ACK

The client responds with an ACK to acknowledge the FIN from the server;

TCP Three-way Handshake Analysis -

Hosts maintain state, track each data segment within a session, and exchange information about what data is received using the information in the TCP header;

TCP is a full-duplex protocol, where each connection represents two one-way communication sessions;

To establish the connection, the hosts perform a three-way handshake;

These are the functions of the three-way handshake:

	It establishes that the destination device is present on the network;

	It verifies that the destination device has an active service and is accepting requests on the destination port number that the 	initiating client intends to use;

	It informs the destination device that the source client intends to establish a communication session on that port number;

After the communication is completed the sessions are closed, and the connection is terminated;

The connection and session mechanisms enable TCP reliability function;

Control Bits Field -

The six bits in the Control Bits field of the TCP segment header are also known as flags;

A flag is a bit that is set to either on or off;

The six control bits flags are as follows:

URG - Urgent pointer field significant;
ACK - Acknowledgment flag used in connection establishment and session termination;
PSH - Push function;
RST - Reset the connection when an error or timeout occurs;
SYN - Synchronize sequence numbers used in connection establishment;
FIN - No more data from sender and used in session termination;

Reliability and Flow Control -

TCP Reliability - Guaranteed and Ordered Delivery -

TCP resends dropped packets and numbers packets to indicate their proper order before delivery;

During session setup, an initial sequence number (ISN) is set;

This ISN represents the starting value of the bytes that are transmitted to the receiving application;

As data is transmitted during the session, the sequence number is incremented by the number of bytes that have been transmitted;

This data byte tracking enables each segment to be uniquely identified and acknowledged;

Missing segments can then be identified;

The ISN does not begin at one but is effectively a random number;

This is to prevent certain types of malicious attacks;

Segment sequence numbers indicate how to reassemble and reorder received segments;

The receiving TCP process places the data from a segment into a receiving buffer;

Segments are then placed in the proper sequence order and passed to the application layer when reassembled;

Any segments that arrive with sequence numbers that are out of order are held for later processing;

Then, when the segments with the missing bytes arrive, these segments are processed in order;

TCP Reliability - Data Loss and Retransmission -

No matter how well designed a network is, data loss occasionally occurs;

The sequence (SEQ) number and acknowledgement (ACK) number are used together to confirm receipt of the bytes of data contained in the transmitted segments;

The SEQ number identifies the first byte of data in the segment being transmitted;

TCP uses the ACK number sent back to the source to indicate the next byte that the receiver expects to receive - This is called expectational acknowledgement;

TCP could only acknowledge the next byte expected;

Host A sends segments 1 through 10 to host B - If all the segments arrive except for segments 3 and 4, host B would reply with acknowledgment specifying that the next segment expected is segment 3 - Host A has no idea if any other segments arrived or not - Host A would, therefore, resend segments 3 through 10 - If all the resent segments arrived successfully, segments 5 through 10 would be duplicates - This can lead to delays, congestion, and inefficiencies;

Host operating systems today typically employ an optional TCP feature called selective acknowledgment (SACK), negotiated during the three-way handshake;

If both hosts support SACK, the receiver can explicitly acknowledge which segments (bytes) were received including any discontinuous segments;

The sending host would therefore only need to retransmit the missing data;

TCP uses timers to know how long to wait before resending a segment;

TCP Flow Control - Window Size and Acknowledgments -

TCP also provides mechanisms for flow control;

Flow control is the amount of data that the destination can receive and process reliably;

Flow control helps maintain the reliability of TCP transmission by adjusting the rate of data flow between source and destination for a given session;

To accomplish this, the TCP header includes a 16-bit field called the window size;

The window size determines the number of bytes that can be sent before expecting an acknowledgment;

The acknowledgment number is the number of the next expected byte;

The window size is the number of bytes that the destination device of a TCP session can accept and process at one time - Example: the PC B initial window size for the TCP session is 10,000 bytes - Starting with the first byte, byte number 1, the last byte PC A can send without receiving an acknowledgment is byte 10,000 - This is known as the send window of PC A - The window size is included in every TCP segment so the destination can modify the window size at any time depending on buffer availability;

The initial window size is agreed upon when the TCP session is established during the three-way handshake;

The source device must limit the number of bytes sent to the destination device based on the window size of the destination;

Only after the source device receives an acknowledgment that the bytes have been received, can it continue sending more data for the session;

Typically, the destination will not wait for all the bytes for its window size to be received before replying with an acknowledgment;

As the bytes are received and processed, the destination will send acknowledgments to inform the source that it can continue to send additional bytes;

A destination sending acknowledgments as it processes bytes received, and the continual adjustment of the source send window, is known as sliding windows;

If the availability of the destination’s buffer space decreases, it may reduce its window size to inform the source to reduce the number of bytes it should send without receiving an acknowledgment;

Devices today use the sliding windows protocol;

The receiver typically sends an acknowledgment after every two segments it receives;

The number of segments received before being acknowledged may vary;

The advantage of sliding windows is that it allows the sender to continuously transmit segments, as long as the receiver is acknowledging previous segments;

TCP Flow Control - Maximum Segment Size (MSS) -

Example: The source is transmitting 1,460 bytes of data within each TCP segment - This is typically the Maximum Segment Size (MSS) that the destination device can receive - The MSS is part of the options field in the TCP header that specifies the largest amount of data, in bytes, that a device can receive in a single TCP segment - The MSS size does not include the TCP header - The MSS is typically included during the three-way handshake;

A common MSS is 1,460 bytes when using IPv4;

A host determines the value of its MSS field by subtracting the IP and TCP headers from the Ethernet maximum transmission unit (MTU);

On an Ethernet interface, the default MTU is 1500 bytes;

Subtracting the IPv4 header of 20 bytes and the TCP header of 20 bytes, the default MSS size will be 1460 bytes;

TCP Flow Control - Congestion Avoidance -

When congestion occurs on a network, it results in packets being discarded by the overloaded router;

When packets containing TCP segments do not reach their destination, they are left unacknowledged;

By determining the rate at which TCP segments are sent but not acknowledged, the source can assume a certain level of network congestion;

Whenever there is congestion, retransmission of lost TCP segments from the source will occur;

If the retransmission is not properly controlled, the additional retransmission of the TCP segments can make the congestion even worse;

Not only are new packets with TCP segments introduced into the network, but the feedback effect of the retransmitted TCP segments that were lost will also add to the congestion;

To avoid and control congestion, TCP employs several congestion handling mechanisms, timers, and algorithms;

If the source determines that the TCP segments are either not being acknowledged or not acknowledged in a timely manner, then it can reduce the number of bytes it sends before receiving an acknowledgment;

Notice that it is the source that is reducing the number of unacknowledged bytes it sends and not the window size determined by the destination;

UDP Communication -

UDP Low Overhead versus Reliability -

UDP is perfect for communications that need to be fast, like VoIP;

UDP Datagram Reassembly -

When UDP datagrams are sent to a destination, they often take different paths and arrive in the wrong order;

UDP does not track sequence numbers;

UDP has no way to reorder the datagrams into their transmission order;

UDP simply reassembles the data in the order that it was received and forwards it to the application;

If the data sequence is important to the application, the application must identify the proper sequence and determine how the data should be processed;

UDP Server Processes and Requests -

UDP-based server applications are assigned well-known or registered port numbers;

When these applications or processes are running on a server, they accept the data matched with the assigned port number;

When UDP receives a datagram destined for one of these ports, it forwards the application data to the appropriate application based on its port number;

UDP Client Processes -

Client-server communication is initiated by a client application that requests data from a server process;

The UDP client process dynamically selects a port number from the range of port numbers and uses this as the source port for the conversation;

The destination port is usually the well-known or registered port number assigned to the server process;

Clients Sending UDP Requests

Client 1 is sending a DNS request while Client 2 is requesting RADIUS authentication services of the same server;

UDP Request Destination Ports

Client 1 is sending a DNS request using the well-known destination port 53 while Client 2 is requesting RADIUS authentication services using the registered destination port 1812;

UDP Request Source Ports

The requests of the clients dynamically generate source port numbers. In this case, Client 1 is using source port 49152 and Client 2 is using source port 51152;

UDP Response Destination

When the server responds to the client requests, it reverses the destination and source ports of the initial request;

In the Server response to the DNS request is now destination port 49152 and the RADIUS authentication response is now destination port 51152;

UDP Response Source Ports

The source ports in the server response are the original destination ports in the initial requests;


Application, Presentation, and Session -

It is the layer that provides the interface between the applications used to communicate, and the underlying network over which messages are transmitted;

Application layer protocols are used to exchange data between programs running on the source and destination hosts;

Based on the TCP/IP model, the upper three layers of the OSI model (application, presentation, and session) define functions of the TCP/IP application layer;

Presentation and Session Layer -

The presentation layer has three primary functions:

Formatting, or presenting, data at the source device into a compatible format for receipt by the destination device;

Compressing data in a way that can be decompressed by the destination device;

Encrypting data for transmission and decrypting data upon receipt;

Session Layer

Functions at the session layer create and maintain dialogs between source and destination applications;

The session layer handles the exchange of information to initiate dialogs, keep them active, and to restart sessions that are disrupted or idle for a long period of time;

TCP/IP Application Layer Protocols -

The TCP/IP application protocols specify the format and control information necessary for many common internet communication functions;

Name System

DNS - Domain Name System (or Service)

	TCP, UDP 53;
	Translates domain names, such as cisco.com, into IP adresses;

Host Config

BOOTP - Bootstrap Protocol

	UDP client 68, server 67;
	Enables a diskless workstation to discover its own IP address, the IP address of a BOOTP server on the network, and a file to be loaded into memory to boot the machine;
	BOOTP is being superseded by DHCP;

DHCP - Dynamic Host Configuration Protocol

	UDP client 68, server 67;
	Dynamically assigns IP addresses to be re-used when no longer needed;

Email

SMTP - Simple Mail Transfer Protocol

	TCP 25;
	Enables clients to send email to a mail server;
	Enables servers to send email to other servers;

POP3 - Post Office Protocol

TCP 110;
Enables clients to retrieve email from a mail server;
Downloads the email to the local mail application of the cliente;

IMAP - Internet Message Access Protocol

TCP 143;
Enables clients to access email stored on a mail server;
Maintains email on the server;

File Transfer

FTP - File Transfer Protocol

TCP 20 to 21;
Sets rules that enable a user on one host to access and transfer files to and from another host over a network;
FTP is a reliable, connection-oriented, and acknowledged file delivery protocol;

TFTP - Trivial File Transfer Protocol

UDP client 69;
A simple, connectionless file transfer protocol with best-effort, unacknowledged file delivery;
It uses less overhead than FTP;

Web

HTTP - Hypertext Transfer Protocol

TCP 80, 8080;
A set of rules for exchanging text, graphic images, sound, video, and other multimedia files on the World Wide Web;

HTTPS - HTTP Secure

TCP, UDP 443;
The browser uses encryption to secure HTTP communications;
Authenticates the website to which you are connecting your browser;

Peer-to-Peer -

Client-Server Model -

The client is a hardware/software combination that people use to directly access the resources that are stored on the server;

Client and server processes are considered to be in the application layer;

Data transfer from a client to a server is referred to as an upload and data from a server to a client as a download;

Peer-to-Peer Networks

In the peer-to-peer (P2P) networking model, the data is accessed from a peer device without the use of a dedicated server;

The P2P network model involves two parts: P2P networks and P2P applications. Both parts have similar features, but in practice work quite differently;

In a P2P network, two or more computers are connected via a network and can share resources (such as printers and files) without having a dedicated server;

Every connected end device (known as a peer) can function as both a server and a cliente;

The roles of client and server are set on a per request basis;

In a peer-to-peer exchange, both devices are considered equal in the communication process;

Peer-to-Peer Applications -

A P2P application allows a device to act as both a client and a server within the same communication;

In this model, every client is a server and every server is a cliente;

P2P applications require that each end device provide a user interface and run a background service;

Some P2P applications use a hybrid system where resource sharing is decentralized, but the indexes that point to resource locations are stored in a centralized directory;

In a hybrid system, each peer accesses an index server to get the location of a resource stored on another peer;

Common P2P Applications -

Each computer in the network that is running the application can act as a client or a server for the other computers in the network that are also running the application;

Some P2P applications are based on the Gnutella protocol, where each user shares whole files with other users;

Gnutella-compatible client software allows users to connect to Gnutella services over the internet, and to locate and access resources shared by other Gnutella peers;

Many Gnutella client applications are available, including μTorrent, BitComet, DC++, Deluge, and emule;

Gnutella P2P applications search for shared resources on multiple peers;

Many P2P applications allow users to share pieces of many files with each other at the same time;

Clients use a torrent file to locate other users who have pieces that they need so that they can then connect directly to them;

This file also contains information about tracker computers that keep track of which users have specific pieces of certain files;

Clients ask for pieces from multiple users at the same time; This is known as a swarm and the technology is called BitTorrent;

BitTorrent has its own client;

But there are many other BitTorrent clients including uTorrent, Deluge, and qBittorrent;

Any type of file can be shared between users;

Many of these files are copyrighted, meaning that only the creator has the right to use and distribute them;

It is against the law to download or distribute copyrighted files without permission from the copyright holder;

Copyright violation can result in criminal charges and civil lawsuits.

Web and Email Protocols -

Hypertext Transfer Protocol and Hypertext Markup Language -

When a web address or Uniform Resource Locator (URL) is typed into a web browser, the web browser establishes a connection to the web service;

Step 1

The browser interprets the three parts of the URL:

http (the protocol or scheme)
www.cisco.com (the server name)
index.html (the specific filename requested)

Step 2

The browser then checks with a name server to convert www.cisco.com into a numeric IP address, which it uses to connect to the server;

The client initiates an HTTP request to a server by sending a GET request to the server and asks for the index.html file;

Step 3

In response to the request, the server sends the HTML code for this web page to the browser;

Step 4

The browser deciphers the HTML code and formats the page for the browser window;

HTTP and HTTPS -

HTTP is a request/response protocol;

The three common message types are GET, POST, and PUT:

GET - This is a client request for data. A client (web browser) sends the GET message to the web server to request HTML pages;
POST - This uploads data files to the web server, such as form data;
PUT - This uploads resources or content to the web server, such as an image;

Email Protocols -

One of the primary services offered by an ISP is email hosting;

Email is a store-and-forward method of sending, storing, and retrieving electronic messages across a network;

Email messages are stored in databases on mail servers;

Email clients communicate with mail servers to send and receive email;

Mail servers communicate with other mail servers to transport messages from one domain to another;

An email client does not communicate directly with another email client when sending email;

Instead, both clients rely on the mail server to transport messages;

SMTP, POP, and IMAP -

SMTP message formats require a message header and a message body;

Although the message body can contain any amount of text, the message header must have a properly formatted recipient email address and a sender address;

SMTP message formats require a message header and a message body;

Although the message body can contain any amount of text, the message header must have a properly formatted recipient email address and a sender address;

When a client sends email, the client SMTP process connects with a server SMTP process on well-known port 25;

After the connection is made, the client attempts to send the email to the server across the connection;

When the server receives the message, it either places the message in a local account, if the recipient is local, or forwards the message to another mail server for delivery;

The destination email server may not be online, or may be busy, when email messages are sent;

Therefore, SMTP spools messages to be sent at a later time;

Periodically, the server checks the queue for messages and attempts to send them again;

If the message is still not delivered after a predetermined expiration time, it is returned to the sender as undeliverable;

IP Addressing Services -

Domain Name System -

The DNS protocol defines an automated service that matches resource names with the required numeric network address;

It includes the format for queries, responses, and data;

Step 1

The user types an FQDN into a browser application Address field;

Step 2

A DNS query is sent to the designated DNS server for the client computer;

Step 3

The DNS server matches the FQDN with its IP address;

Step 4

The DNS query response is sent back to the client with the IP address for the FQDN;

Step 5

The client computer uses the IP address to make requests of the server;

DNS Message Format -

The DNS server stores different types of resource records that are used to resolve names. These records contain the name, address, and type of record;

A - An end device IPv4 address;
NS - An authoritative name server;
AAAA - An end device IPv6 address;
MX - A mail exchange record;

When a client makes a query, the server DNS process first looks at its own records to resolve the name;

If it is unable to resolve the name by using its stored records, it contacts other servers to resolve the name;

After a match is found and returned to the original requesting server, the server temporarily stores the numbered address in the event that the same name is requested again;

The DNS cient service on Windows PCs also stores previously resolved names in memory;

The ipconfig /displaydns command displays all of the cached DNS entries;

DNS message section	Description
Question		The question for the name server
Answer			Resource Records answering the question
Authority		Resource Records pointing toward an authority
Additional		Resource Records holding additional information

DNS Hierarchy -

The DNS protocol uses a hierarchical system to create a database to provide name resolution;

DNS uses domain names to form the hierarchy;

The naming structure is broken down into small, manageable zones;

Each DNS server maintains a specific database file and is only responsible for managing name-to-IP mappings for that small portion of the entire DNS structure;

DNS is scalable because hostname resolution is spread across multiple servers;

The different top-level domains represent either the type of organization or the country of origin;

.com - a business or industry;
.org - a non-profit organization;
.au - Australia;
.co - Colombia;

The nslookup Command -

When configuring a network device, one or more DNS Server addresses are provided that the DNS client can use for name resolution;

Computer operating systems also have a utility called Nslookup that allows the user to manually query the name servers to resolve a given host name;

When the nslookup command is issued the default DNS server configured for your host is displayed;

The name of a host or domain can be entered at the nslookup prompt;

Dynamic Host Configuration Protocol -

When the lease period expires or the DHCP server gets a DHCPRELEASE message the address is returned to the DHCP pool for reuse;

The DHCP server in most medium-to-large networks is usually a local, dedicated PC-based server;

With home networks, the DHCP server is usually located on the local router that connects the home network to the ISP;

DHCP Operation -

When an IPv4, DHCP-configured device boots up or connects to the network, the client broadcasts a DHCP discover (DHCPDISCOVER) message to identify any available DHCP servers on the network;

A DHCP server replies with a DHCP offer (DHCPOFFER) message, which offers a lease to the client;

The offer message contains the IPv4 address and subnet mask to be assigned, the IPv4 address of the DNS server, and the IPv4 address of the default gateway;

The lease offer also includes the duration of the lease;

The client may receive multiple DHCPOFFER messages if there is more than one DHCP server on the local network;

Therefore, it must choose between them, and sends a DHCP request (DHCPREQUEST) message that identifies the explicit server and lease offer that the client is accepting;

A client may also choose to request an address that it had previously been allocated by the server;

Assuming that the IPv4 address requested by the client, or offered by the server, is still available, the server returns a DHCP acknowledgment (DHCPACK) message that acknowledges to the client that the lease has been finalized;

If the offer is no longer valid, then the selected server responds with a DHCP negative acknowledgment (DHCPNAK) message;

If a DHCPNAK message is returned, then the selection process must begin again with a new DHCPDISCOVER message being transmitted;

After the client has the lease, it must be renewed prior to the lease expiration through another DHCPREQUEST message;

File Transfer Protocol -

In the client/server model, the client can upload data to a server, and download data from a server, if both devices are using a file transfer protocol (FTP);

FTP was developed to allow for data transfers between a client and a server;

An FTP client is an application which runs on a computer that is being used to push and pull data from an FTP server;

The client establishes the first connection to the server for control traffic using TCP port 21;

The traffic consists of client commands and server replies;

The data transfer can happen in either direction;

The client can download (pull) data from the server, or the client can upload (push) data to the server;

Server Message Block -

The Server Message Block (SMB) is a client/server file sharing protocol that describes the structure of shared network resources, such as directories, files, printers, and serial ports;

It is a request-response protocol;

All SMB messages share a common format;

This format uses a fixed-sized header, followed by a variable-sized parameter and data component;

Here are three functions of SMB messages:

	Start, authenticate, and terminate sessions;

	Control file and printer access;

	Allow an application to send or receive messages to or from another device;

SMB file-sharing and print services have become the mainstay of Microsoft networking;

With the introduction of the Windows 2000 software series, Microsoft changed the underlying structure for using SMB;

SMB is a client/server, request-response protocol;

Servers can make their own resources available to clients on the network;

Unlike the file sharing supported by FTP, clients establish a long-term connection to servers;

After the connection is established, the user of the client can access the resources on the server as though the resource is local to the client host;

The LINUX and UNIX operating systems also provide a method of sharing resources with Microsoft networks by using a version of SMB called SAMBA;

The Apple Macintosh operating systems also support resource sharing by using the SMB protocol;

Security Threats and Vulnerabilities -

Types of Threats -

Intruders can gain access to a network through software vulnerabilities, hardware attacks, or through guessing someone's username and password;

Intruders who gain access by modifying software or exploiting software vulnerabilities are called threat actors;

Information theft - 

Is breaking into a computer to obtain confidential information;

Data loss and manipulation -

Is breaking into a computer to destroy or alter data records;

Identity theft -

Is a form of information theft where personal information is stolen for the purpose of taking over the identity of someone;

Disruption of service -

Is preventing legitimate users from accessing services to which they are entitled;

Types of Vulnerabilities -

Vulnerability is the degree of weakness in a network or a device;

Some degree of vulnerability is inherent in routers, switches, desktops, servers, and even security devices;

There are three primary vulnerabilities or weaknesses: technological, configuration, and security policy;

All three of these sources of vulnerabilities can leave a network or device open to various attacks, including malicious code attacks and network attacks;

Technological Vulnerabilities -

	TCP/IP Protocol Weakness -
		
		Hypertext Transfer Protocol (HTTP), File Transfer Protocol (FTP), and Internet Control Message Protocol (ICMP) are inherently insecure;
		Simple Network Management Protocol (SNMP) and Simple Mail Transfer Protocol (SMTP) are related to the inherently insecure structure upon which TCP was designed;

	Operating System Weakness -

	Network Equipment Weakness -

		Various types of network equipment, such as routers, firewalls, and switches have security weaknesses that must be recognized and protected against;
		Their weaknesses include password protection, lack of authentication, routing protocols, and firewall holes;

Physical Security -
	
An equally important vulnerable area of the network to consider is the physical security of devices;

If network resources can be physically compromised, a threat actor can deny the use of network resources;

Four classes of physical threats are as follows -

Hardware threats - This includes physical damage to servers, routers, switches, cabling plant, and workstations;

Environmental threats - This includes temperature extremes (too hot or too cold) or humidity extremes (too wet or too dry);

Electrical threats - This includes voltage spikes, insufficient supply voltage (brownouts), unconditioned power (noise), and total power loss;

Maintenance threats - This includes poor handling of key electrical components (electrostatic discharge), lack of critical spare parts, poor cabling, and poor labeling;

Network Attacks -

Types of Malware -

Malware is short for malicious software;

It is code or software specifically designed to damage, disrupt, steal, or inflict “bad” or illegitimate action on data, hosts, or networks. Viruses, worms, and Trojan horses are types of malware;

Viruses -

A computer virus is a type of malware that propagates by inserting a copy of itself into, and becoming part of, another program;

It spreads from one computer to another, leaving infections as it travels;

Viruses can range in severity from causing mildly annoying effects, to damaging data or software and causing denial of service (DoS) conditions;

Almost all viruses are attached to an executable file, which means the virus may exist on a system but will not be active or able to spread until a user runs or opens the malicious host file or program;

When the host code is executed, the viral code is executed as well;

Normally, the host program keeps functioning after the virus infects it;

However, some viruses overwrite other programs with copies of themselves, which destroys the host program altogether;

Viruses spread when the software or document they are attached to is transferred from one computer to another using the network, a disk, file sharing, or infected email attachments;

Worms -

Computer worms are similar to viruses in that they replicate functional copies of themselves and can cause the same type of damage;

In contrast to viruses, which require the spreading of an infected host file, worms are standalone software and do not require a host program or human help to propagate;

A worm does not need to attach to a program to infect a host and enter a computer through a vulnerability in the system;

Worms take advantage of system features to travel through the network unaided;

Trojan Horses -

It is a harmful piece of software that looks legitimate;

Users are typically tricked into loading and executing it on their systems;

After it is activated, it can achieve any number of attacks on the host, from irritating the user (with excessive pop-up windows or changing the desktop) to damaging the host (deleting files, stealing data, or activating and spreading other malware, such as viruses);

Trojan horses are also known to create back doors to give malicious users access to the system;

Unlike viruses and worms, Trojan horses do not reproduce by infecting other files;

Trojan horses must spread through user interaction such as opening an email attachment or downloading and running a file from the internet;

Reconnaissance Attacks -

Network attacks can be classified into three major categories:

Reconnaissance attacks - The discovery and mapping of systems, services, or vulnerabilities;

Access attacks - The unauthorized manipulation of data, system access, or user privileges;

Denial of service - The disabling or corruption of networks, systems, or services;

For reconnaissance attacks, external threat actors can use internet tools, such as the nslookup and whois utilities, to easily determine the IP address space assigned to a given corporation or entity;

After the IP address space is determined, a threat actor can then ping the publicly available IP addresses to identify the addresses that are active;

To help automate this step, a threat actor may use a ping sweep tool, such as fping or gping;

This systematically pings all network addresses in a given range or subnet;

Internet Queries -

The threat actor is looking for initial information about a target;

Various tools can be used, including Google search, the websites of organizations, whois, and more;

Ping Sweeps -

The threat actor initiates a ping sweep to determine which IP addresses are active;

Port Scans -

A Threat actor performing a port scan on the discovered active IP addresses;

Access Attacks -

Access attacks exploit known vulnerabilities in authentication services, FTP services, and web services to gain entry to web accounts, confidential databases, and other sensitive information;

An access attack allows individuals to gain unauthorized access to information that they have no right to view;

Access attacks can be classified into four types: password attacks, trust exploitation, port redirection, and man-in-the middle;

Password Attacks -

Threat actors can implement password attacks using several different methods:

Brute-force attacks;
Trojan horse attacks;
Packet sniffers;

Trust Exploitation -

In a trust exploitation attack, a threat actor uses unauthorized privileges to gain access to a system, possibly compromising the target;

Port Redirection -

In a port redirection attack, a threat actor uses a compromised system as a base for attacks against other targets;

A threat actor using SSH (port 22) to connect to a compromised host A;

Host A is trusted by host B and, therefore, the threat actor can use Telnet (port 23) to access it;

Man-in-the-Middle -

Man-in-the-Middle

In a man-in-the-middle attack, the threat actor is positioned in between two legitimate entities in order to read or modify the data that passes between the two parties;

Denial of Service Attacks -

Denial of service (DoS) attacks are the most publicized form of attack and among the most difficult to eliminate;

However, because of their ease of implementation and potentially significant damage, DoS attacks deserve special attention from security administrators;

DoS attacks take many forms;

Ultimately, they prevent authorized people from using a service by consuming system resources;

To help prevent DoS attacks it is important to stay up to date with the latest security updates for operating systems and applications;

DoS Attack -

DoS attacks are a major risk because they interrupt communication and cause significant loss of time and money;

These attacks are relatively simple to conduct, even by an unskilled threat actor;

DDoS Attack -

A DDoS is similar to a DoS attack, but it originates from multiple, coordinated sources;

A threat actor builds a network of infected hosts, known as zombies;

A network of zombies is called a botnet. The threat actor uses a command and control (CnC) program to instruct the botnet of zombies to carry out a DDoS attack;

Network Attack Mitigations -

The Defense-in-Depth Approach -

To mitigate network attacks, you must first secure devices including routers, switches, servers, and hosts;

Most organizations employ a defense-in-depth approach (also known as a layered approach) to security;

This requires a combination of networking devices and services working in tandem;

Several security devices and services are implemented to protect an organization’s users and assets against TCP/IP threats:

VPN - A router is used to provide secure VPN services with corporate sites and remote access support for remote users using secure encrypted tunnels;

ASA Firewall - This dedicated device provides stateful firewall services. It ensures that internal traffic can go out and come back, but external traffic cannot initiate connections to inside hosts;

IPS - An intrusion prevention system (IPS) monitors incoming and outgoing traffic looking for malware, network attack signatures, and more. If it recognizes a threat, it can immediately stop it;

ESA/WSA - The email security appliance (ESA) filters spam and suspicious emails. The web security appliance (WSA) filters known and suspicious internet malware sites

AAA Server - This server contains a secure database of who is authorized to access and manage network devices. Network devices authenticate administrative users using this database;

Keep Backups -

Backing up device configurations and data is one of the most effective ways of protecting against data loss;

A data backup stores a copy of the information on a computer to removable backup media that can be kept in a safe place;

Infrastructure devices should have backups of configuration files and IOS images on an FTP or similar file server;

If the computer or a router hardware fails, the data or configuration can be restored using the backup copy;

Backups should be performed on a regular basis as identified in the security policy;

Data backups are usually stored offsite to protect the backup media if anything happens to the main facility;

Backup considerations and their Descriptions:

Frequency -

Perform backups on a regular basis as identified in the security policy;

Full backups can be time-consuming, therefore perform monthly or weekly backups with frequent partial backups of changed files;

Validation -

Always validate backups to ensure the integrity of the data and validate the file restoration procedures;

Storage -

Backups should be transported to an approved offsite storage location on a daily, weekly, or monthly rotation, as required by the security policy;

Security -

Backups should be protected using strong passwords;

The password is required to restore the data;

Upgrade, Update, and Patch -

Keeping up to date with the latest developments can lead to a more effective defense against network attacks;

The most effective way to mitigate a worm attack is to download security updates from the operating system vendor and patch all vulnerable systems;

Administering numerous systems involves the creation of a standard software image (operating system and accredited applications that are authorized for use on client systems) that is deployed on new or upgraded systems;

Authentication, Authorization, and Accounting -

Authentication, authorization, and accounting (AAA, or “triple A”) network security services provide the primary framework to set up access control on network devices;

AAA is a way to control who is permitted to access a network (authenticate), what actions they perform while accessing the network (authorize), and making a record of what was done while they are there (accounting);

Firewalls -

A firewall is one of the most effective security tools available for protecting users from external threats;

A firewall protects computers and networks by preventing undesirable traffic from entering internal networks;

Network firewalls reside between two or more networks, control the traffic between them, and help prevent unauthorized access;

A firewall could allow outside users controlled access to specific services;

Servers accessible to outside users are usually located on a special network referred to as the demilitarized zone (DMZ);

The DMZ enables a network administrator to apply specific policies for hosts connected to that network;

Types of Firewalls -

Firewall products come packaged in various forms;

These products use different techniques for determining what will be permitted or denied access to a network;

Packet filtering - Prevents or allows access based on IP or MAC addresses;

Application filtering - Prevents or allows access by specific application types based on port numbers;

URL filtering - Prevents or allows access to websites based on specific URLs or keywords;

Stateful packet inspection (SPI) - Incoming packets must be legitimate responses to requests from internal hosts;

Unsolicited packets are blocked unless permitted specifically;

SPI can also include the capability to recognize and filter out specific types of attacks, such as denial of service (DoS);

Endpoint Security -

An endpoint, or host, is an individual computer system or device that acts as a network client;

Common endpoints are laptops, desktops, servers, smartphones, and tablets;

Securing endpoint devices is one of the most challenging jobs of a network administrator because it involves human nature;

Policies often include the use of antivirus software and host intrusion prevention;

Device Security -

Cisco AutoSecure -

One area of networks that requires special attention to maintain security is the devices;

For Cisco routers, the Cisco AutoSecure feature can be used to assist securing the system:

"
Router# auto secure
                --- AutoSecure Configuration ---
*** AutoSecure configuration enhances the security of
the router but it will not make router absolutely secure
from all security attacks ***
"

Passwords -

On Cisco routers, leading spaces are ignored for passwords, but spaces after the first character are not;

Therefore, one method to create a strong password is to use the space bar and create a phrase made of many words;

This is called a passphrase. A passphrase is often easier to remember than a simple password;

It is also longer and harder to guess;

Additional Password Security -

"
R1(config)# service password-encryption 
R1(config)# security passwords min-length 8 
R1(config)# login block-for 120 attempts 3 within 60
R1(config)# line vty 0 4 
R1(config-line)# password cisco123 
R1(config-line)# exec-timeout 5 30 
R1(config-line)# transport input ssh 
R1(config-line)# end 
R1# 
R1# show running-config | section line vty
line vty 0 4
  password 7 094F471A1A0A
  exec-timeout 5 30
  login
  transport input ssh
R1#
"

Enable SSH -

"
Router# configure terminal
Router(config)# hostname R1
R1(config)# ip domain name span.com
R1(config)# crypto key generate rsa general-keys modulus 1024
The name for the keys will be: Rl.span.com % The key modulus size is 1024 bits
% Generating 1024 bit RSA keys, keys will be non-exportable...[OK]
Dec 13 16:19:12.079: %SSH-5-ENABLED: SSH 1.99 has been enabled
R1(config)#
R1(config)# username Bob secret cisco
R1(config)# line vty 0 4
R1(config-line)# login local
R1(config-line)# transport input ssh
R1(config-line)# exit
R1(config)#
"

Disable Unused Services -

Cisco routers and switches start with a list of active services that may or may not be required in your network;

Disable any unused services to preserve system resources, such as CPU cycles and RAM, and prevent threat actors from exploiting these services;

The type of services that are on by default will vary depending on the IOS version;

Router# show ip ports all
Proto Local Address               Foreign Address             State       PID/Program Name
TCB   Local Address               Foreign Address             (state)
tcp   :::443                      :::*                        LISTEN      309/[IOS]HTTP CORE
tcp   *:443                       *:*                         LISTEN      309/[IOS]HTTP CORE
udp   *:67                        0.0.0.0:0                               387/[IOS]DHCPD Receive
Router#

IOS versions prior to IOS-XE use the show control-plane host open-ports command;

We mention this command because you may see it on older devices;

However, notice that this older router has an insecure HTTP server and Telnet running. Both of these services should be disabled;

Router# show control-plane host open-ports 
Active internet connections (servers and established)
Prot        Local Address      Foreign Address                  Service    State
 tcp                 *:23                  *:0                   Telnet   LISTEN
 tcp                 *:80                  *:0                HTTP CORE   LISTEN
 udp                 *:67                  *:0            DHCPD Receive   LISTEN
Router# configure terminal
Router(config)# no ip http server
Router(config)# line vty 0 15
Router(config-line)# transport input ssh

Devices in a Small Network -

Small Network Topologies -

The majority of businesses are small;

Therefore, it is not surprising that the majority of business networks are also small;

This small network requires a router, a switch, and a wireless access point to connect wired and wireless users, an IP phone, a printer, and a server;

Small networks typically have a single WAN connection provided by DSL, cable, or an Ethernet connection;

Device Selection for a Small Network -

Cost -

The cost of a switch or router is determined by its capacity and features;

This includes the number and types of ports available and the backplane speed;

Other factors that influence the cost are network management capabilities, embedded security technologies, and optional advanced switching technologies;

The expense of cable runs required to connect every device on the network must also be considered;

Another key element affecting cost considerations is the amount of redundancy to incorporate into the network;

Speed and Types of Ports/Interfaces -

Choosing the number and type of ports on a router or switch is a critical decision;

Newer computers have built-in 1 Gbps NICs. Some servers may even have 10 Gbps ports;

Although it is more expensive, choosing Layer 2 devices that can accommodate increased speeds allows the network to evolve without replacing central devices;

Expandability -

Networking devices are available in fixed and modular physical configurations;

Fixed configuration devices have a specific number and type of ports or interfaces and cannot be expanded;

Modular devices have expansion slots to add new modules as requirements evolve;

Switches are available with additional ports for high-speed uplinks;

Routers can be used to connect different types of networks;

Care must be taken to select the appropriate modules and interfaces for the specific media;

Operating System Features and Services -

Network devices must have operating systems that can support the organizations requirements such as the following:

Layer 3 switching
Network Address Translation (NAT)
Dynamic Host Configuration Protocol (DHCP)
Security
Quality of service (QoS)
Voice over IP (VoIP)

IP Addressing for a Small Network -

Devices that will factor into the IP addressing scheme include the following:

End user devices - The number and type of connection (wired, wireless, remote access);

Servers and peripherals devices (printers and security cameras);

Intermediary devices including switches and access points;

Notice that the assignable IP address ranges were deliberately allocated on subnetnetwork boundaries to simplify summarizing the group type;

For instance, assume another switch with IP address 192.168.2.6 is added to the network;

To identify all switches in a network policy, the administrator could specify the summarized network address 192.168.x.4/30;

Redundancy in a Small Network -

Another important part of network design is reliability;

In order to maintain a high degree of reliability, redundancy is required in the network design;

Redundancy helps to eliminate single points of failure;

There are many ways to accomplish redundancy in a network;

Redundancy can be accomplished by installing duplicate equipment, but it can also be accomplished by supplying duplicate network links for critical areas;

Small networks typically provide a single exit point toward the internet via one or more default gateways;

If the router fails, the entire network loses connectivity to the internet;

For this reason, it may be advisable for a small business to pay for a second service provider as backup;

Traffic Management -

The goal for a good network design, even for a small network, is to enhance the productivity of the employees and minimize network downtime;

The routers and switches in a small network should be configured to support real-time traffic, such as voice and video, in an appropriate manner relative to other data traffic;

In fact, a good network design will implement quality of service (QoS) to classify traffic carefully according to priority during times of congestion;

Small Network Applications and Protocols

Common Applications -

The network is only as useful as the applications that are on it;

There are two forms of software programs or processes that provide access to the network: network applications and application layer services;

Network Applications -

Applications are the software programs used to communicate over the network;

Some end-user applications are network-aware, meaning that they implement application layer protocols and are able to communicate directly with the lower layers of the protocol stack;

Email clients and web browsers are examples of this type of application;

Application Layer Services -

Other programs may need the assistance of application layer services to use network resources like file transfer or network print spooling;

Though transparent to an employee, these services are the programs that interface with the network and prepare the data for transfer;

Different types of data, whether text, graphics or video, require different network services to ensure that they are properly prepared for processing by the functions occurring at the lower layers of the OSI model;

Each application or network service uses protocols, which define the standards and data formats to be used;

Without protocols, the data network would not have a common way to format and direct data;

In order to understand the function of various network services, it is necessary to become familiar with the underlying protocols that govern their operation;

Common Protocols -

Most of a technician’s work, in either a small or a large network, will in some way be involved with network protocols;

Network protocols support the applications and services used by employees in a small network;

Network administrators commonly require access to network devices and servers;

The two most common remote access solutions are Telnet and Secure Shell (SSH);

SSH service is a secure alternative to Telnet. When connected, administrators can access the SSH server device as though they were logged in locally;

SSH is used to establish a secure remote access connection between an SSH client and other SSH-enabled devices:

Network device - The network device (router, switch, access point, etc.) must support SSH to provide remote access SSH server services to clients;

Server - The server (web server, email server, etc.) must support remote access SSH server services to clients;

Web Server -

Web clients and web servers exchange web traffic using the Hypertext Transfer Protocol (HTTP);

Hypertext Transfer Protocol Secure (HTTPS) is used for secure web communication;

Email Server -

Email servers and clients use Simple Mail Transfer Protocol (SMTP) to send emails;

Email clients use Post Office Protocol (POP3) or Internet Message Access Protocol (IMAP) to retrieve email;

Recipients are specified using the user@xyz.xxx format;

FTP Server -

File Transfer Protocol (FTP) service allows files to be downloaded and uploaded between a client and FTP server;

FTP Secure (FTPS) and Secure FTP (SFTP) are used to secure FTP file exchange;

DHCP Serve -

Dynamic Host Configuration Protocol (DHCP) is used by clients to acquire an IP configuration (IP address, subnet mask, default gateway and more) from a DHCP server.

DNS Server -

Domain Name System (DNS) resolves a domain name to an IP address (cisco.com = 72.163.4.185);

DNS provides the IP address of a web site (domain name) to a requesting host;

These network protocols comprise the fundamental toolset of a network professional. Each of these network protocols define:

Processes on either end of a communication session;
Types of messages;
Syntax of the messages;
Meaning of informational fields;
How messages are sent and the expected response;
Interaction with the next lower layer;

Many companies have established a policy of using secure versions (e.g., SSH, SFTP, and HTTPS) of these protocols whenever possible;

Voice and Video Applications -

Businesses today are increasingly using IP telephony and streaming media to communicate with customers and business partners;

The network administrator must ensure the proper equipment is installed in the network and that the network devices are configured to ensure priority delivery;

Infrastructure -

The network infrastructure must support the real-time applications;

Existing devices and cabling must be tested and validated;

Newer networking products may be required;

VoIP -

VoIP devices convert analog telephone signals into digital IP packets;

Typically, VOIP is less expensive than an IP telephony solution, but the quality of communications does not meet the same standards;

Small network voice and video over IP can be solved using Skype and non-enterprise versions of Cisco WebEx;

IP Telephony -

An IP phone performs voice-to-IP conversion with the use of a dedicated server for call control and signaling;

Many vendors provide small business IP telephony solutions such as the Cisco Business Edition 4000 Series products;

Real-Time Applications -

The network must support quality of service (QoS) mechanisms to minimize latency issues for real-time streaming applications;

Real-Time Transport Protocol (RTP) and Real-Time Transport Control Protocol (RTCP) are two protocols that support this requirement;

Scale to Larger Networks -

Small Network Growth -

If your network is for a small business, presumably, you want that business to grow, and your network to grow along with it;

This is called scaling a network, and there are some best practices for doing this;

To scale a network, several elements are required :

Network documentation - Physical and logical topology;

Device inventory - List of devices that use or comprise the network;

Budget - Itemized IT budget, including fiscal year equipment purchasing budget;

Traffic analysis - Protocols, applications, and services and their respective traffic requirements should be documented;

Protocol Analysis -

As the network grows, it becomes important to determine how to manage network traffic;

There are several network management tools that can be used for this purpose;

However, a simple protocol analyzer such as Wireshark can also be used;

For instance, running Wireshark on several key hosts can reveal the types of network traffic flowing through the network;

To determine traffic flow patterns, it is important to do the following :

Capture traffic during peak utilization times to get a good representation of the different traffic types;

Perform the capture on different network segments and devices as some traffic will be local to a particular segment;

Information gathered by the protocol analyzer is evaluated based on the source and destination of the traffic, as well as the type of traffic being sent;

This analysis can be used to make decisions on how to manage the traffic more efficiently;

This can be done by reducing unnecessary traffic flows or changing flow patterns altogether by moving a server;

Sometimes, simply relocating a server or service to another network segment improves network performance and accommodates the growing traffic needs;

Employee Network Utilization -

Many operating systems provide built-in tools to display such information;

Windows host provides tools such as the Task Manager, Event Viewer, and Data Usage tools;

These tools can be used to capture a “snapshot” of information such as the following :

OS and OS Version;

CPU utilization;

RAM utilization;

Drive utilization;

Non-Network applications;

Network applications;

Documenting snapshots for employees in a small network over a period of time is very useful to identify evolving protocol requirements and associated traffic flows;

A shift in resource utilization may require the network administrator to adjust network resource allocations accordingly;

The Windows 10 Data Usage tool is especially useful to determine which applications are using network services on a host;

The Data Usage tool is accessed using Settings > Network & Internet > Data usage > network interface (from the last 30 days);

Verify Connectivity -

Verify Connectivity with Ping -

Whether your network is small and new, or you are scaling an existing network, you will always want to be able to verify that your components are properly connected to each other and to the internet;

The ping command is the most effective way to quickly test Layer 3 connectivity between a source and destination IP address;

The command also displays various round-trip time statistics;

Specifically, the ping command uses the Internet Control Message Protocol (ICMP) echo request (ICMP Type 8) and echo reply (ICMP Type 0) messages;

The ping command is available in most operating systems including Windows, Linux, macOS, and Cisco IOS.

On a Windows 10 host, the ping command sends four consecutive ICMP echo request messages and expects four consecutive ICMP echo replies from the destination;

IOS Ping Indicators -

! - Exclamation mark indicates successful receipt of an echo reply message;

It validates a Layer 3 connection between source and destination;

. - A period means that time expired waiting for an echo reply message;

U	
Uppercase U indicates a router along the path responded with an ICMP Type 3 “destination unreachable” error message;

Possible reasons include the router does not know the direction to the destination network or it could not find the host on the destination network;

This indicates a connectivity problem occurred somewhere along the path;

Q	Source quench (destination too busy);
M	Could not fragment;
?	Unknown packet type;
&	Packet lifetime exceeded;

Extended Ping -

The Cisco IOS offers an "extended" mode of the ping command;

This mode enables the user to create special type of pings by adjusting parameters related to the command operation;

Extended ping is entered in privileged EXEC mode by typing ping without a destination IP address;

You will then be given several prompts to customize the extended ping;

Verify Connectivity with Traceroute -

Traceroute can help locate Layer 3 problem areas in a network;

A trace returns a list of hops as a packet is routed through a network;

It could be used to identify the point along the path where the problem can be found;

"
C:\Users\PC-A> tracert 10.1.1.10
Tracing route to 10.1.10 over a maximum of 30 hops:
  1     2 ms     2 ms     2 ms  192.168.10.1
  2     *        *        *     Request timed out.
  3     *        *        *     Request timed out.
  4     *        *        *     Request timed out.
^C
C:\Users\PC-A>
"
The only successful response was from the gateway on R1;

Trace requests to the next hop timed out as indicated by the asterisk (*), meaning that the next hop router did not respond;

The timed out requests indicate that there is a failure in the internetwork beyond the LAN, or that these routers have been configured to not respond to echo requests used in the trace;

Timeouts indicate a potential problem;

For instance, if the 10.1.1.10 host was not available, the traceroute command would display the following output;

"
R1# traceroute 10.1.1.10
Type escape sequence to abort.
Tracing the route to 10.1.1.10
VRF info: (vrf in name/id, vrf out name/id)
  1 209.165.200.226 1 msec 0 msec 1 msec
  2 209.165.200.230 1 msec 0 msec 1 msec
  3  *  *  *
  4  *  *  *
  5  *
"

Use Ctrl-Shift-6 to interrupt a traceroute in Cisco IOS;

Note: Windows implementation of traceroute (tracert) sends ICMP Echo Requests;

Cisco IOS and Linux use UDP with an invalid port number;

The final destination will return an ICMP port unreachable message;

Extended Traceroute -

It allows the administrator to adjust parameters related to the command operation;

This is helpful in locating the problem when troubleshooting routing loops, determining the exact next-hop router, or determining where packets are getting dropped or denied by a router or firewall;

The Windows tracert command allows the input of several parameters through options in the command line;

However, it is not guided like the extended traceroute IOS command;

"
C:\Users\PC-A> tracert /?
Usage: tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout]
               [-R] [-S srcaddr] [-4] [-6] target_name
Options:
    -d                 Do not resolve addresses to hostnames.
    -h maximum_hops    Maximum number of hops to search for target.
    -j host-list       Loose source route along host-list (IPv4-only).
    -w timeout         Wait timeout milliseconds for each reply.
    -R                 Trace round-trip path (IPv6-only).
    -S srcaddr         Source address to use (IPv6-only).
    -4                 Force using IPv4.
    -6                 Force using IPv6.
C:\Users\PC-A>
"

The Cisco IOS extended traceroute option enables the user to create a special type of trace by adjusting parameters related to the command operation;

Extended traceroute is entered in privileged EXEC mode by typing traceroute without a destination IP address;

IOS will guide you through the command options by presenting a number of prompts related to the setting of all the different parameters;

Network Baseline -

One of the most effective tools for monitoring and troubleshooting network performance is to establish a network baseline;

Creating an effective network performance baseline is accomplished over a period of time;

Measuring performance at varying times and loads will assist in creating a better picture of overall network performance;

The output derived from network commands contributes data to the network baseline;

One method for starting a baseline is to copy and paste the results from an executed ping, trace, or other relevant commands into a text file;

Among items to consider are error messages and the response times from host to host;

If there is a considerable increase in response times, there may be a latency issue to address;

Corporate networks should have extensive baselines;

Professional-grade software tools are available for storing and maintaining baseline information;

Host and IOS Commands -

IP Configuration on a Windows Host -

Host and IOS commands can help you determine if the problem is with the IP addressing of your devices, which is a common network problem;

Network administrators typically view the IP addressing information on a Windows host by issuing the ipconfig command at the command line of a Windows computer;

Use the ipconfig /all command to view the MAC address, as well as a number of details regarding the Layer 3 addressing of the device;

If a host is configured as a DHCP client, the IP address configuration can be renewed using the ipconfig /release and ipconfig /renew commands;

The DNS Client service on Windows PCs also optimizes the performance of DNS name resolution by storing previously resolved names in memory;

The ipconfig /displaydns command displays all of the cached DNS entries on a Windows computer system;

The arp Command -

The command lists all devices currently in the ARP cache of the host, which includes the IPv4 address, physical address, and the type of addressing (static/dynamic), for each device;

"
C:\Users\PC-A> arp -a
Interface: 192.168.93.175 --- 0xc
  Internet Address      Physical Address      Type
  10.0.0.2              d0-67-e5-b6-56-4b     dynamic
  10.0.0.3              78-48-59-e3-b4-01     dynamic
  10.0.0.4              00-21-b6-00-16-97     dynamic
  10.0.0.254            00-15-99-cd-38-d9     dynamic
"
The arp -a command displays the known IP address and MAC address binding;

Notice how IP address 10.0.0.5 is not included in the list;

This is because the ARP cache only displays information from devices that have been recently accessed;

To ensure that the ARP cache is populated, ping a device so that it will have an entry in the ARP table;

For instance, if PC-A pinged 10.0.0.5, then the ARP cache would contain an entry for that IP address;

The cache can be cleared by using the netsh interface ip delete arpcache command in the event the network administrator wants to repopulate the cache with updated information;

Note: You may need administrator access on the host to be able to use the netsh interface ip delete arpcache command;

Common show Commands Revisited -

Commands can be used to verify the interfaces of intermediary devices;

The Cisco IOS provides commands to verify the operation of router and switch interfaces;

Command			Useful for ...
show running-config 	To verify the current configuration and settings

show interfaces 	To verify the interface status and see if there are any error messages

show ip interface 	To verify the Layer 3 information of an interface

show arp 		To verify the list of known hosts on the local Ethernet LANs

show ip route 		To verify the Layer 3 routing information

show protocols 		To verify which protocols are operational

show version 		To verify the memory, interfaces, and licences of the device

The show cdp neighbors Command -

The Cisco Discovery Protocol (CDP) is a Cisco proprietary protocol that runs at the data link layer;

Because CDP operates at the data link layer, two or more Cisco network devices, such as routers that support different network layer protocols, can learn about each other even if Layer 3 connectivity has not been established;

When a Cisco device boots, CDP starts by default. CDP automatically discovers neighboring Cisco devices running CDP, regardless of which Layer 3 protocol or suites are running;

CDP exchanges hardware and software device information with its directly connected CDP neighbors;

CDP provides the following information about each CDP neighbor device:

Device identifiers - The configured host name of a switch, router, or other device;

Address list - Up to one network layer address for each protocol supported;

Port identifier - The name of the local and remote port in the form of an ASCII character string, such as FastEthernet 0/0;

Capabilities list - For example, whether a specific device is a Layer 2 switch or a Layer 3 switch;

Platform - The hardware platform of the device--for example, a Cisco 1841 series router;

"
R3# show cdp neighbors
Capability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater, P - Phone,
                  D - Remote, C - CVTA, M - Two-port Mac Relay
Device ID        Local Intrfce     Holdtme    Capability  Platform  Port ID
S3               Gig 0/0/1         122              S I   WS-C2960+ Fas 0/5
Total cdp entries displayed : 1
R3#
"

This is because CDP can only discover directly connected Cisco devices;

The show cdp neighbors detail command reveals the IP address of a neighboring device;

CDP will reveal the IP address of the neighbor regardless of whether or not you can ping that neighbor;

This command is very helpful when two Cisco routers cannot route across their shared data link;

The show cdp neighbors detail command will help determine if one of the CDP neighbors has an IP configuration error.

As helpful as CDP is, it can also be a security risk because it can provide useful network infrastructure information to threat actors;

However, best practices suggest that CDP should be enabled only on interfaces that are connecting to other infrastructure Cisco devices;

CDP advertisements should be disabled on user-facing ports;

To disable CDP globally, use the global configuration command no cdp run;

To disable CDP on an interface, use the interface command no cdp enable;

Troubleshooting Methodologies -

Basic Troubleshooting Approaches -

There are many ways to troubleshoot a network problem;

Network problems can be simple or complex, and can result from a combination of hardware, software, and connectivity issues;

Technicians must be able to analyze the problem and determine the cause of the error before they can resolve the network issue;

This process is called troubleshooting;

Step	Description

Step 1. Identify the Problem	
	This is the first step in the troubleshooting process;
	Although tools can be used in this step, a conversation with the user is often very helpful;

Step 2. Establish a Theory of Probable Causes	
	After the problem is identified, try to establish a theory of probable causes;
	This step often yields more than a few probable causes to the problem;

Step 3. Test the Theory to Determine Cause	
	Based on the probable causes, test your theories to determine which one is the cause of the problem;
	A technician will often apply a quick procedure to test and see if it solves the problem;
	If a quick procedure does not correct the problem, you might need to research the problem further to establish the exact cause;

Step 4. Establish a Plan of Action and Implement the Solution
	After you have determined the exact cause of the problem, establish a plan of action to resolve the problem and implement the solution;

Step 5. Verify Solution and Implement Preventive Measures	
	After you have corrected the problem, verify full functionality;
	If applicable, implement preventive measures;

Step 6. Document Findings, Actions, and Outcomes	
	In the final step of the troubleshooting process, document your findings, actions, and outcomes;
	This is very important for future reference;

To assess the problem, determine how many devices on the network are experiencing the problem;

If there is a problem with one device on the network, start the troubleshooting process at that device;

If there is a problem with all devices on the network, start the troubleshooting process at the device where all other devices are connected;

The debug Command -

OS processes, protocols, mechanisms and events generate messages to communicate their status;

The IOS debug command allows the administrator to display these messages in real-time for analysis;

It is a very important tool for monitoring events on a Cisco IOS device;

The Cisco IOS allows for narrowing the output of debug to include only the relevant feature or subfeature;

This is important because debugging output is assigned high priority in the CPU process and it can render the system unusable;

For this reason, use debug commands only to troubleshoot specific problems;

Be cautious using some debug command;

Commands such as debug all and debug ip packet generate a substantial amount of output and can use a large portion of system resources;

The router could get so busy displaying debug messages that it would not have enough processing power to perform its network functions, or even listen to commands to turn off debugging;

For this reason, using these command options is not recommended and should be avoided;

The terminal monitor Command -

Certain IOS messages are automatically displayed on a console connection but not on a remote connection;

For instance, debug output is displayed by default on console connections;

However, debug output is not automatically displayed on remote connections;

This is because debug messages are log messages which are prevented from being displayed on vty lines;

In the following output for instance, the user established a remote connection using Telnet from R2 to R1;

The user then issued the debug ip icmp command. However, the command failed to display debug output;

"
R2# telnet 209.165.200.225
Trying 209.165.200.225 ... Open
 Authorized access only!
User Access Verification
Password:
R1> enable
Password:
R1# debug ip icmp
ICMP packet debugging is on
R1# ping 10.1.1.1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.1.1.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 1/1/2 ms
R1#
! No debug output displayed>
"

To display log messages on a terminal (virtual console), use the terminal monitor privileged EXEC command;

To stop logging messages on a terminal, use the terminal no monitor privileged EXEC command;

For instance, notice how the terminal monitor command has now been entered and the ping command displays the debug output;

"
R1#  terminal monitor
R1# ping 10.1.1.1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.1.1.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 1/1/2 ms
R1#
*Aug 20 16:03:49.735: ICMP: echo reply rcvd, src 10.1.1.1, dst 209.165.200.225,topology BASE, dscp 0 topoid 0
**Aug 20 16:03:49.737: ICMP: echo reply rcvd, src 10.1.1.1, dst 209.165.200.225,topology BASE, dscp 0 topoid 0
**Aug 20 16:03:49.738: ICMP: echo reply rcvd, src 10.1.1.1, dst 209.165.200.225,topology BASE, dscp 0 topoid 0
**Aug 20 16:03:49.740: ICMP: echo reply rcvd, src 10.1.1.1, dst 209.165.200.225,topology BASE, dscp 0 topoid 0
**Aug 20 16:03:49.741: ICMP: echo reply rcvd, src 10.1.1.1, dst 209.165.200.225,topology BASE, dscp 0 topoid 0
R1# no debug ip icmp
ICMP packet debugging is off
R1#
"

Note: The intent of the debug command is to capture live output for a short period of time (i.e., a few seconds to a minute or so). Always disable debug when not required;

Troubleshooting Scenarios -

Duplex Operation and Mismatch Issues -

Interconnecting Ethernet interfaces must operate in the same duplex mode for best communication performance and to avoid inefficiency and latency on the link;

The Ethernet autonegotiation feature facilitates configuration, minimizes problems and maximizes link performance between two interconnecting Ethernet links;

The connected devices first announce their supported capabilities and then choose the highest performance mode supported by both ends;

If one of the two connected devices is operating in full-duplex and the other is operating in half-duplex, a duplex mismatch occurs;

While data communication will occur through a link with a duplex mismatch, link performance will be very poor;

Duplex mismatches are typically caused by a misconfigured interface or in rare instances by a failed autonegotiation;

Duplex mismatches may be difficult to troubleshoot as the communication between devices still occurs;

IP Addressing Issues on End Devices -

In Windows-based machines, when the device cannot contact a DHCP server, Windows will automatically assign an address belonging to the 169.254.0.0/16 range;

This feature is called Automatic Private IP Addressing (APIPA) and is designed to facilitate communication within the local network;

Think of it as Windows saying, “I will use this address from the 169.254.0.0/16 range because I could not get any other address”;

Note: Other operating systems, such Linux and OS X, will not assign an IPv4 address to the network interface if communication with a DHCP server fails;

Troubleshooting DNS Issues -

It is common for users to mistakenly relate the operation of an internet link to the availability of the DNS;

User complaints such as “the network is down” or “the internet is down” are often caused by an unreachable DNS server; While packet routing and all other network services are still operational, DNS failures often lead the user to the wrong conclusion;

If a user types in a domain name such as www.cisco.com in a web browser and the DNS server is unreachable, the name will not be translated into an IP address and the website will not display;

Cisco offers OpenDNS which provides secure DNS service by filtering phishing and some malware sites;

You can change your DNS address to 208.67.222.222 and 208.67.220.220 in the Preferred DNS server and Alternate DNS server fields;

Advanced features such as web content filtering and security are available to families and businesses;

The nslookup command is another useful DNS troubleshooting tool for PCs;

With nslookup a user can manually place DNS queries and analyze the DNS response;

Note: It is not always possible to type an IP address in nslookup and receive the domain name. One of the most common reasons for this is that most websites run on servers that support multiple sites;

QUESTÕES E RESPOSTAS -

1 Which method is used to send a ping message specifying the source address for the ping?

By issuing the ping command without a destination IP address in privileged EXEC mode, the Cisco IOS enters extended ping mode. This allows the user to implement extended commands which include source IP address.​

2 When configuring SSH on a router to implement secure network management, a network engineer has issued the login local and transport input ssh line vty commands. What three additional configuration actions have to be performed to complete the SSH configuration? (Choose three.)

Generate the asymmetric RSA keys | Configure the correct IP domain name | Create a valid local username and password database 

SSH is automatically enabled after the RSA keys are generated. Setting user privilege levels and configuring role-based CLI access are good security practices but are not a requirement of implementing SSH.

3 A networking technician is working on the wireless network at a medical clinic. The technician accidentally sets up the wireless network so that patients can see the medical records data of other patients. Which of the four network characteristics has been violated in this situation?

Network security includes protecting the confidentiality of data that is on the network. In this case, because confidential data has been made available to unauthorized users, the security characteristic of the network has failed.

4 RESPOSTA

DSL is an always-on, high bandwidth connection that runs over telephone lines. Cable uses the same coaxial cable that carries television signals into the home to provide Internet access. Dialup telephone is much slower than either DSL or cable, but is the least expensive option for home users because it can use any telephone line and a simple modem. Satellite requires a clear line of sight and is affected by trees and other obstructions. None of these typical home options use dedicated leased lines such as T1/E1 and T3/E3.

5 Which command or key combination allows a user to return to the previous level in the command hierarchy?

End and CTRL-Z return the user to the privileged EXEC mode. Ctrl-C ends a command in process. The exit command returns the user to the previous level.

6 After making configuration changes on a Cisco switch, a network administrator issues a copy running-config startup-config command. What is the result of issuing this command?

The new configuration will be loaded if the switch is restarted.

With the copy running-config startup-config command, the content of the current operating configuration replaces the startup configuration file stored in NVRAM. The configuration file saved in NVRAM will be loaded when the device is restarted.

7 Which statement accurately describes a TCP/IP encapsulation process when a PC is sending data to the network?

When the data is traveling from the PC to the network, the transport layer sends segments to the internet layer. The internet layer sends packets to the network access layer, which creates frames and then converts the frames to bits. The bits are released to the network media.

8 What layer is responsible for routing messages through an internetwork in the TCP/IP model?

The TCP/IP model consists of four layers: application, transport, internet, and network access. Of these four layers, it is the internet layer that is responsible for routing messages. The session layer is not part of the TCP/IP model but is rather part of the OSI model.

9 Where are IPv4 address to Layer 2 Ethernet address mappings maintained on a host computer?

ARP cache

The ARP cache is used to store IPv4 addresses and the Ethernet physical addresses or MAC addresses to which the IPv4 addresses are mapped. Incorrect mappings of IP addresses to MAC addresses can result in loss of end-to-end connectivity.

10 A new network administrator has been asked to enter a banner message on a Cisco device. What is the fastest way a network administrator could test whether the banner is properly configured?

While at the privileged mode prompt such as Router#, type exit ,press Enter , and the banner message appears. Power cycling a network device that has had the banner motd command issued will also display the banner message, but this is not a quick way to test the configuration.

11 What are two potential network problems that can result from ARP operation? (Choose two.)

Large numbers of ARP broadcast messages could cause momentary data communications delays. Network attackers could manipulate MAC address and IP address mappings in ARP messages with the intent to intercept network traffic. ARP requests and replies cause entries to be made into the ARP table, not the MAC address table. ARP table overflows are very unlikely. Manually configuring static ARP associations is a way to prevent, not facilitate, ARP poisoning and MAC address spoofing. Multiple ARP replies resulting in the switch MAC address table containing entries that match the MAC addresses of connected nodes and are associated with the relevant switch port are required for normal switch frame forwarding operations. It is not an ARP caused network problem.

12 An administrator must send a message to everyone on the router A network. What is the broadcast address for network 172.16.16.0/22?

The 172.16.16.0/22 network has 22 bits in the network portion and 10 bits in the host portion. Converting the network address to binary yields a subnet mask of 255.255.252.0. The range of addresses in this network will end with the last address available before 172.16.20.0. Valid host addresses for this network range from 172.16.16.1-172.16.19.254, making 172.16.19.255 the broadcast address.

13 A user issues a ping fe80:65ab:dcc1::100 command and receives a response that includes a code of 3 . What does this code represent?

Address unreachable.

14 Which layer in the TCP/IP model is used for formatting, compressing, and encrypting data?

The application layer of the TCP/IP model performs the functions of three layers of the OSI model - application, presentation, and session. The application layer of the TCP/IP model is the layer that provides the interface between the applications, is responsible for formatting, compressing, and encrypting data, and is used to create and maintain dialogs between source and destination applications.

15 Which two protocols may devices use in the application process that sends email? (Choose two.)

POP, POP3, and IMAP are protocols that are used to retrieve email from servers. SMTP is the default protocol that is used to send email. DNS may be used by the sender email server to find the address of the destination email server.

16 Which three statements describe a DHCP Discover message? (Choose three.)

When a host configured to use DHCP powers up on a network it sends a DHCPDISCOVER message. FF-FF-FF-FF-FF-FF is the L2 broadcast address. A DHCP server replies with a unicast DHCPOFFER message back to the host.

17 Which three statements characterize UDP? (Choose three.)

UDP relies on application layer protocols for error detection.

UDP provides basic connectionless transport layer functions.

UDP is a low overhead protocol that does not provide sequencing or flow control mechanisms.

UDP is a simple protocol that provides the basic transport layer functions. It has much lower overhead than TCP because it is not connection-oriented and does not offer the sophisticated retransmission, sequencing, and flow control mechanisms that provide reliability.

18 What kind of port must be requested from IANA in order to be used with a specific application?

Registered ports (numbers 1024 to 49151) are assigned by IANA to a requesting entity to use with specific processes or applications. These processes are primarily individual applications that a user has chosen to install, rather than common applications that would receive a well-known port number. For example, Cisco has registered port 1985 for its Hot Standby Routing Protocol (HSRP) process.

19 What two characteristics describe an FTP connection? (Choose two.)

The first connection established is for traffic control and the second connection is created to transfer a file.

Files can be downloaded from or uploaded to the server.

An FTP client is an application that runs on a computer used to push and pull files from a server running an FTP daemon. To transfer files, FTP requires two connections between the client and the server: one for commands and replies and another for the actual file transfer. The client establishes the first connection to the server for control traffic and the second connection for the actual file transfer. This connection is created every time there is a file to be transferred. The client can download a file from or upload a file to the server.
